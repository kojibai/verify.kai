import{C as e,E as t,N as n,d as r,l as i,t as a}from"./index-B7eM5Hf1.js";import{i as o,p as s}from"./sigilUrl-D4W5RyV_.js";import{A as c,C as l,D as u,E as d,M as f,N as p,O as m,S as h,T as g,_,a as v,b as y,c as b,d as x,f as S,g as C,h as w,i as T,j as E,k as D,l as O,m as k,n as ee,o as te,p as ne,r as re,s as ie,t as ae,u as oe,v as se,w as ce,x as le,y as ue}from"./helpers-47wkJyYd.js";import{i as de,n as fe}from"./valuation-fobxj7Zk.js";const pe=e=>[...e].map(e=>e.toString(16)).map(e=>e.padStart(2,`0`)).join(``);function A(e){return!(typeof SharedArrayBuffer<`u`&&e.buffer instanceof SharedArrayBuffer)&&e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:e.slice().buffer}async function me(e){let t=typeof e==`string`?new TextEncoder().encode(e):e,n=await crypto.subtle.digest(`SHA-256`,A(t));return new Uint8Array(n)}var he=`123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz`;function ge(e){let t=0n;for(let n of e)t=(t<<8n)+BigInt(n);let n=``;for(;t>0n;){let e=t%58n;n=he[Number(e)]+n,t/=58n}for(let t=0;t<e.length&&e[t]===0;t+=1)n=he[0]+n;return n}async function _e(e,t=0){let n=new Uint8Array(1+e.length);n[0]=t,n.set(e,1);let r=(await me(await me(n))).slice(0,4),i=new Uint8Array(n.length+4);return i.set(n),i.set(r,n.length),ge(i)}function ve(e){let t=e>>>0;return function(){t=t+1831565813|0;let e=Math.imul(t^t>>>15,1|t);return e=e+Math.imul(e^e>>>7,61|t)^e,((e^e>>>14)>>>0)/4294967296}}const ye=e=>{let t=e.replace(/^0x/i,``),n=new Uint8Array(t.length/2);for(let e=0;e<n.length;e+=1)n[e]=parseInt(t.substr(e*2,2),16);return n};function be(e){let t=-1>>>0;for(let n=0;n<e.length;n+=1){t^=e[n];for(let e=0;e<8;e+=1)t=t&1?3988292384^t>>>1:t>>>1}return~t>>>0}const xe=e=>{let t=e.replace(/-/g,`+`).replace(/_/g,`/`),n=t.length%4;n&&(t+=`=`.repeat(4-n));let r=atob(t),i=new Uint8Array(r.length);for(let e=0;e<r.length;e++)i[e]=r.charCodeAt(e);return i};async function Se(e){let{creatorPublicKey:t,userPhiKey:n,kaiSignature:r,origin:i,pulse:a,beat:o,chakraDay:s,stepIndex:c}=e;if(t)return{creator:`did:key:${t}`,creatorId:t,creatorAlg:`did:key`};if(n)return{creator:`phi:${n}`,creatorId:n,creatorAlg:`phi-b58chk`};if(r){let e=await _e((await me(r)).slice(0,20));return{creator:`phi:${e}`,creatorId:e,creatorAlg:`sig→sha256→b58chk`}}let l=await _e((await me(`anon:${i??``}:${a}|${o}|${s}|${c}`)).slice(0,20));return{creator:`anon:${l}`,creatorId:l,creatorAlg:`anon-b58chk`}}function Ce(e){let t={};for(let n of[`kty`,`crv`,`alg`,`kid`,`x`,`y`,`n`,`e`,`d`,`p`,`q`,`dp`,`dq`,`qi`]){let r=e[n];typeof r==`string`&&(t[n]=r)}return Array.isArray(e.key_ops)&&(t.key_ops=e.key_ops.map(e=>String(e))),typeof e.ext==`boolean`&&(t.ext=e.ext),t}var j=n(t(),1);function we(){let[e,t]=(0,j.useState)(!1),[n,r]=(0,j.useState)(!1);return(0,j.useEffect)(()=>{if(typeof window>`u`||!window.matchMedia)return;let e=window.matchMedia(`(prefers-reduced-motion: reduce)`),n=window.matchMedia(`(prefers-contrast: more)`),i=()=>{t(!!e.matches),r(!!n.matches)};return i(),e.addEventListener?.(`change`,i),n.addEventListener?.(`change`,i),()=>{e.removeEventListener?.(`change`,i),n.removeEventListener?.(`change`,i)}},[]),{prefersReduce:e,prefersContrast:n}}var Te=e=>typeof e==`object`&&!!e;function Ee(e){let[t,n]=(0,j.useState)(null),a=(0,j.useRef)(null);return(0,j.useEffect)(()=>{a.current=t},[t]),(0,j.useEffect)(()=>{if(e!==`moment`)return;let t=!1,a=async()=>{try{let e=await r();!t&&Te(e)&&n(e)}catch{}};a();let o=window.setInterval(a,i);return()=>{t=!0,window.clearInterval(o)}},[e]),{kaiData:t,kaiDataRef:a}}function De(e){let t=e=>{let t=2166136261;for(let n=0;n<e.length;n+=1)t^=e.charCodeAt(n),t=Math.imul(t,16777619);return t>>>0};return(0,j.useMemo)(()=>t(e),[e])}function Oe(){return(0,j.useMemo)(()=>async e=>{let t=new TextEncoder().encode(e),n=await crypto.subtle.digest(`SHA-256`,A(t));return Array.from(new Uint8Array(n)).map(e=>e.toString(16)).map(e=>e.padStart(2,`0`)).join(``)},[])}var M=n(a(),1),ke=({uid:e,size:t,phaseColor:n,outerRingText:r,innerRingText:a,animate:o,prefersReduce:s})=>{let c=m*.34,l=c/u,d=l*.96/(m/2),f=`${e}-zk-phi-ring`,p=`${e}-zk-bin-ring`,h=`${e}-zk-grad`,g=`${e}-zk-petal-def`,_=Math.max(1,(t??240)*.008),v=Math.max(.9,(t??240)*.007),y=Math.max(1.2,(t??240)*.009),b=o&&!s,x=(0,j.useRef)(null);return(0,j.useEffect)(()=>{if(!b)return;let e=x.current;if(!e)return;let t=0,n=performance.now(),r=i/1e3,a=1/r*(u*.21),o=1/r*((u-1)*.17),s=1/r*(Math.SQRT2*.15),c=Math.PI/2,l=Math.PI/3,d=()=>{let r=(performance.now()-n)/1e3,i=5+1.6*(.5+.5*Math.sin(2*Math.PI*a*r)),u=8+1.2*(.5+.5*Math.sin(2*Math.PI*o*r+1.234)),f=c+l*Math.sin(2*Math.PI*s*r+.777);e.setAttribute(`d`,E(i,u,f)),t=requestAnimationFrame(d)};return t=requestAnimationFrame(d),()=>cancelAnimationFrame(t)},[b]),(0,M.jsxs)(`g`,{id:`${e}-zk-glyph`,"aria-label":`Atlantean zero-knowledge verification glyph`,pointerEvents:`none`,children:[(0,M.jsxs)(`defs`,{children:[(0,M.jsxs)(`radialGradient`,{id:h,cx:`50%`,cy:`50%`,r:`60%`,children:[(0,M.jsx)(`stop`,{offset:`0%`,stopColor:n,stopOpacity:`0.85`,children:b&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(`animate`,{attributeName:`stop-opacity`,values:`.55;.85;.55`,dur:`${i}ms`,repeatCount:`indefinite`}),(0,M.jsx)(`animate`,{attributeName:`stop-color`,values:`${n};#00FFD0;${n}`,dur:`${i*3}ms`,repeatCount:`indefinite`})]})}),(0,M.jsx)(`stop`,{offset:`55%`,stopColor:n,stopOpacity:`0.55`,children:b&&(0,M.jsx)(`animate`,{attributeName:`stop-color`,values:`${n};#00FFD0;${n}`,dur:`${i*3}ms`,repeatCount:`indefinite`})}),(0,M.jsx)(`stop`,{offset:`100%`,stopColor:`#00FFD0`,stopOpacity:`0.25`,children:b&&(0,M.jsx)(`animate`,{attributeName:`stop-opacity`,values:`.15;.35;.15`,dur:`${i}ms`,repeatCount:`indefinite`})})]}),(0,M.jsx)(`path`,{id:f,d:`M 500 ${500-c} a ${c} ${c} 0 1 1 0 ${2*c} a ${c} ${c} 0 1 1 0 -${2*c}`,fill:`none`}),(0,M.jsx)(`path`,{id:p,d:`M 500 ${500-l} a ${l} ${l} 0 1 1 0 ${2*l} a ${l} ${l} 0 1 1 0 -${2*l}`,fill:`none`}),(0,M.jsx)(`path`,{id:g,ref:x,d:E(5,8,Math.PI/2)})]}),(0,M.jsx)(`circle`,{cx:500,cy:500,r:c,fill:`none`,stroke:`url(#${h})`,strokeWidth:y,opacity:`0.5`,vectorEffect:`non-scaling-stroke`}),Array.from({length:12},(e,t)=>(0,M.jsx)(`use`,{href:`#${g}`,transform:`translate(500,500) scale(${d}) rotate(${t*30}) translate(-500,-500)`,stroke:`url(#${h})`,strokeWidth:_,strokeLinecap:`round`,strokeLinejoin:`round`,opacity:`0.42`,fill:`none`,vectorEffect:`non-scaling-stroke`},t)),(0,M.jsxs)(`g`,{opacity:`0.25`,children:[(0,M.jsx)(`circle`,{cx:500-l/2.2,cy:500,r:l*.86,fill:`none`,stroke:n,strokeWidth:v}),(0,M.jsx)(`circle`,{cx:500+l/2.2,cy:500,r:l*.86,fill:`none`,stroke:`#00FFD0`,strokeWidth:v})]}),(0,M.jsx)(`circle`,{cx:500,cy:500,r:l,fill:`none`,stroke:`url(#${h})`,strokeWidth:v,opacity:`0.55`,vectorEffect:`non-scaling-stroke`}),(0,M.jsx)(`text`,{fontFamily:`ui-monospace, SFMono-Regular, Menlo, Consolas, monospace`,fontSize:Math.max(8,(t??240)*.035),fill:n,opacity:`0.33`,textAnchor:`middle`,dominantBaseline:`middle`,letterSpacing:Math.max(.8,(t??240)*.002),pointerEvents:`none`,children:(0,M.jsx)(`textPath`,{href:`#${f}`,startOffset:`50%`,children:r})},`outer-${r}`),(0,M.jsx)(`text`,{fontFamily:`ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial`,fontSize:Math.max(7,(t??240)*.03),fill:`#00FFD0`,opacity:`0.28`,textAnchor:`middle`,dominantBaseline:`middle`,pointerEvents:`none`,children:(0,M.jsx)(`textPath`,{href:`#${p}`,startOffset:`50%`,children:a})})]})};function Ae(e){if(e instanceof Date)return e.toISOString();if(e===null||typeof e==`string`||typeof e==`boolean`)return e;if(typeof e==`number`)return Number.isFinite(e)?e:null;if(Array.isArray(e))return e.map(e=>Ae(e));let t=e,n={},r=Object.keys(t).sort();for(let e of r){let r=t[e];r!==void 0&&(n[e]=Ae(r))}return n}function je(e){let t=Ae(e);return JSON.stringify(t)}function Me(e){return new TextEncoder().encode(je(e))}async function Ne(t){let{blake3:n}=await e(async()=>{let{blake3:e}=await import(`./index.esm-CnqFZ8CG.js`);return{blake3:e}},[]);return n(t)}var N=4,Pe=0,Fe=1,Ie=2;function Le(e){let t=e.length;for(;--t>=0;)e[t]=0}var Re=0,ze=1,Be=2,Ve=3,He=258,Ue=29,P=256,We=P+1+Ue,F=30,Ge=19,Ke=2*We+1,I=15,qe=16,Je=7,Ye=256,Xe=16,Ze=17,Qe=18,$e=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),et=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),tt=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),nt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),rt=512,L=Array((We+2)*2);Le(L);var R=Array(F*2);Le(R);var it=Array(rt);Le(it);var at=Array(He-Ve+1);Le(at);var z=Array(Ue);Le(z);var ot=Array(F);Le(ot);function st(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}var ct,lt,ut;function dt(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}var ft=e=>e<256?it[e]:it[256+(e>>>7)],pt=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},B=(e,t,n)=>{e.bi_valid>qe-n?(e.bi_buf|=t<<e.bi_valid&65535,pt(e,e.bi_buf),e.bi_buf=t>>qe-e.bi_valid,e.bi_valid+=n-qe):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},mt=(e,t,n)=>{B(e,n[t*2],n[t*2+1])},ht=(e,t)=>{let n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1},gt=e=>{e.bi_valid===16?(pt(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},_t=(e,t)=>{let n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,a=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,c=t.stat_desc.max_length,l,u,d,f,p,m,h=0;for(f=0;f<=I;f++)e.bl_count[f]=0;for(n[e.heap[e.heap_max]*2+1]=0,l=e.heap_max+1;l<Ke;l++)u=e.heap[l],f=n[n[u*2+1]*2+1]+1,f>c&&(f=c,h++),n[u*2+1]=f,!(u>r)&&(e.bl_count[f]++,p=0,u>=s&&(p=o[u-s]),m=n[u*2],e.opt_len+=m*(f+p),a&&(e.static_len+=m*(i[u*2+1]+p)));if(h!==0){do{for(f=c-1;e.bl_count[f]===0;)f--;e.bl_count[f]--,e.bl_count[f+1]+=2,e.bl_count[c]--,h-=2}while(h>0);for(f=c;f!==0;f--)for(u=e.bl_count[f];u!==0;)d=e.heap[--l],!(d>r)&&(n[d*2+1]!==f&&(e.opt_len+=(f-n[d*2+1])*n[d*2],n[d*2+1]=f),u--)}},V=(e,t,n)=>{let r=Array(I+1),i=0,a,o;for(a=1;a<=I;a++)i=i+n[a-1]<<1,r[a]=i;for(o=0;o<=t;o++){let t=e[o*2+1];t!==0&&(e[o*2]=ht(r[t]++,t))}},vt=()=>{let e,t,n,r,i,a=Array(I+1);for(n=0,r=0;r<Ue-1;r++)for(z[r]=n,e=0;e<1<<$e[r];e++)at[n++]=r;for(at[n-1]=r,i=0,r=0;r<16;r++)for(ot[r]=i,e=0;e<1<<et[r];e++)it[i++]=r;for(i>>=7;r<F;r++)for(ot[r]=i<<7,e=0;e<1<<et[r]-7;e++)it[256+ i++]=r;for(t=0;t<=I;t++)a[t]=0;for(e=0;e<=143;)L[e*2+1]=8,e++,a[8]++;for(;e<=255;)L[e*2+1]=9,e++,a[9]++;for(;e<=279;)L[e*2+1]=7,e++,a[7]++;for(;e<=287;)L[e*2+1]=8,e++,a[8]++;for(V(L,We+1,a),e=0;e<F;e++)R[e*2+1]=5,R[e*2]=ht(e,5);ct=new st(L,$e,P+1,We,I),lt=new st(R,et,0,F,I),ut=new st([],tt,0,Ge,Je)},yt=e=>{let t;for(t=0;t<We;t++)e.dyn_ltree[t*2]=0;for(t=0;t<F;t++)e.dyn_dtree[t*2]=0;for(t=0;t<Ge;t++)e.bl_tree[t*2]=0;e.dyn_ltree[Ye*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},bt=e=>{e.bi_valid>8?pt(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},xt=(e,t,n,r)=>{let i=t*2,a=n*2;return e[i]<e[a]||e[i]===e[a]&&r[t]<=r[n]},St=(e,t,n)=>{let r=e.heap[n],i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&xt(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!xt(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},H=(e,t,n)=>{let r,i,a=0,o,s;if(e.sym_next!==0)do r=e.pending_buf[e.sym_buf+ a++]&255,r+=(e.pending_buf[e.sym_buf+ a++]&255)<<8,i=e.pending_buf[e.sym_buf+ a++],r===0?mt(e,i,t):(o=at[i],mt(e,o+P+1,t),s=$e[o],s!==0&&(i-=z[o],B(e,i,s)),r--,o=ft(r),mt(e,o,n),s=et[o],s!==0&&(r-=ot[o],B(e,r,s)));while(a<e.sym_next);mt(e,Ye,t)},Ct=(e,t)=>{let n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,a=t.stat_desc.elems,o,s,c=-1,l;for(e.heap_len=0,e.heap_max=Ke,o=0;o<a;o++)n[o*2]===0?n[o*2+1]=0:(e.heap[++e.heap_len]=c=o,e.depth[o]=0);for(;e.heap_len<2;)l=e.heap[++e.heap_len]=c<2?++c:0,n[l*2]=1,e.depth[l]=0,e.opt_len--,i&&(e.static_len-=r[l*2+1]);for(t.max_code=c,o=e.heap_len>>1;o>=1;o--)St(e,n,o);l=a;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],St(e,n,1),s=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=s,n[l*2]=n[o*2]+n[s*2],e.depth[l]=(e.depth[o]>=e.depth[s]?e.depth[o]:e.depth[s])+1,n[o*2+1]=n[s*2+1]=l,e.heap[1]=l++,St(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],_t(e,t),V(n,c,e.bl_count)},wt=(e,t,n)=>{let r,i=-1,a,o=t[1],s=0,c=7,l=4;for(o===0&&(c=138,l=3),t[(n+1)*2+1]=65535,r=0;r<=n;r++)a=o,o=t[(r+1)*2+1],!(++s<c&&a===o)&&(s<l?e.bl_tree[a*2]+=s:a===0?s<=10?e.bl_tree[Ze*2]++:e.bl_tree[Qe*2]++:(a!==i&&e.bl_tree[a*2]++,e.bl_tree[Xe*2]++),s=0,i=a,o===0?(c=138,l=3):a===o?(c=6,l=3):(c=7,l=4))},U=(e,t,n)=>{let r,i=-1,a,o=t[1],s=0,c=7,l=4;for(o===0&&(c=138,l=3),r=0;r<=n;r++)if(a=o,o=t[(r+1)*2+1],!(++s<c&&a===o)){if(s<l)do mt(e,a,e.bl_tree);while(--s!==0);else a===0?s<=10?(mt(e,Ze,e.bl_tree),B(e,s-3,3)):(mt(e,Qe,e.bl_tree),B(e,s-11,7)):(a!==i&&(mt(e,a,e.bl_tree),s--),mt(e,Xe,e.bl_tree),B(e,s-3,2));s=0,i=a,o===0?(c=138,l=3):a===o?(c=6,l=3):(c=7,l=4)}},W=e=>{let t;for(wt(e,e.dyn_ltree,e.l_desc.max_code),wt(e,e.dyn_dtree,e.d_desc.max_code),Ct(e,e.bl_desc),t=Ge-1;t>=3&&e.bl_tree[nt[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},Tt=(e,t,n,r)=>{let i;for(B(e,t-257,5),B(e,n-1,5),B(e,r-4,4),i=0;i<r;i++)B(e,e.bl_tree[nt[i]*2+1],3);U(e,e.dyn_ltree,t-1),U(e,e.dyn_dtree,n-1)},Et=e=>{let t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return Pe;if(e.dyn_ltree[18]!==0||e.dyn_ltree[20]!==0||e.dyn_ltree[26]!==0)return Fe;for(n=32;n<P;n++)if(e.dyn_ltree[n*2]!==0)return Fe;return Pe},Dt=!1,Ot=e=>{Dt||=(vt(),!0),e.l_desc=new dt(e.dyn_ltree,ct),e.d_desc=new dt(e.dyn_dtree,lt),e.bl_desc=new dt(e.bl_tree,ut),e.bi_buf=0,e.bi_valid=0,yt(e)},kt=(e,t,n,r)=>{B(e,(Re<<1)+(r?1:0),3),bt(e),pt(e,n),pt(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},At={_tr_init:Ot,_tr_stored_block:kt,_tr_flush_block:(e,t,n,r)=>{let i,a,o=0;e.level>0?(e.strm.data_type===Ie&&(e.strm.data_type=Et(e)),Ct(e,e.l_desc),Ct(e,e.d_desc),o=W(e),i=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=i&&(i=a)):i=a=n+5,n+4<=i&&t!==-1?kt(e,t,n,r):e.strategy===N||a===i?(B(e,(ze<<1)+(r?1:0),3),H(e,L,R)):(B(e,(Be<<1)+(r?1:0),3),Tt(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),H(e,e.dyn_ltree,e.dyn_dtree)),yt(e),r&&bt(e)},_tr_tally:(e,t,n)=>(e.pending_buf[e.sym_buf+ e.sym_next++]=t,e.pending_buf[e.sym_buf+ e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+ e.sym_next++]=n,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(at[n]+P+1)*2]++,e.dyn_dtree[ft(t)*2]++),e.sym_next===e.sym_end),_tr_align:e=>{B(e,ze<<1,3),mt(e,Ye,L),gt(e)}},jt=(e,t,n,r)=>{let i=e&65535|0,a=e>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do i=i+t[r++]|0,a=a+i|0;while(--o);i%=65521,a%=65521}return i|a<<16|0},Mt=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t})()),G=(e,t,n,r)=>{let i=Mt,a=r+n;e^=-1;for(let n=r;n<a;n++)e=e>>>8^i[(e^t[n])&255];return e^-1},Nt={2:`need dictionary`,1:`stream end`,0:``,"-1":`file error`,"-2":`stream error`,"-3":`data error`,"-4":`insufficient memory`,"-5":`buffer error`,"-6":`incompatible version`},Pt={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:Ft,_tr_stored_block:It,_tr_flush_block:Lt,_tr_tally:Rt,_tr_align:zt}=At,{Z_NO_FLUSH:Bt,Z_PARTIAL_FLUSH:Vt,Z_FULL_FLUSH:Ht,Z_FINISH:K,Z_BLOCK:Ut,Z_OK:q,Z_STREAM_END:Wt,Z_STREAM_ERROR:Gt,Z_DATA_ERROR:Kt,Z_BUF_ERROR:qt,Z_DEFAULT_COMPRESSION:Jt,Z_FILTERED:Yt,Z_HUFFMAN_ONLY:Xt,Z_RLE:Zt,Z_FIXED:Qt,Z_DEFAULT_STRATEGY:$t,Z_UNKNOWN:en,Z_DEFLATED:tn}=Pt,nn=9,rn=15,an=8,on=286,sn=30,cn=19,ln=2*on+1,un=15,J=3,dn=258,fn=dn+J+1,pn=32,mn=42,hn=57,gn=69,_n=73,vn=91,yn=103,bn=113,xn=666,Y=1,Sn=2,Cn=3,wn=4,Tn=3,En=(e,t)=>(e.msg=Nt[t],t),Dn=e=>e*2-(e>4?9:0),On=e=>{let t=e.length;for(;--t>=0;)e[t]=0},kn=e=>{let t,n,r,i=e.w_size;t=e.hash_size,r=t;do n=e.head[--r],e.head[r]=n>=i?n-i:0;while(--t);t=i,r=t;do n=e.prev[--r],e.prev[r]=n>=i?n-i:0;while(--t)},An=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,X=e=>{let t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))},Z=(e,t)=>{Lt(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,X(e.strm)},Q=(e,t)=>{e.pending_buf[e.pending++]=t},jn=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},Mn=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),i===0?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),e.state.wrap===1?e.adler=jt(e.adler,t,i,n):e.state.wrap===2&&(e.adler=G(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},Nn=(e,t)=>{let n=e.max_chain_length,r=e.strstart,i,a,o=e.prev_length,s=e.nice_match,c=e.strstart>e.w_size-fn?e.strstart-(e.w_size-fn):0,l=e.window,u=e.w_mask,d=e.prev,f=e.strstart+dn,p=l[r+o-1],m=l[r+o];e.prev_length>=e.good_match&&(n>>=2),s>e.lookahead&&(s=e.lookahead);do{if(i=t,l[i+o]!==m||l[i+o-1]!==p||l[i]!==l[r]||l[++i]!==l[r+1])continue;r+=2,i++;do;while(l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&r<f);if(a=dn-(f-r),r=f-dn,a>o){if(e.match_start=t,o=a,a>=s)break;p=l[r+o-1],m=l[r+o]}}while((t=d[t&u])>c&&--n!==0);return o<=e.lookahead?o:e.lookahead},Pn=e=>{let t=e.w_size,n,r,i;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-fn)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),kn(e),r+=t),e.strm.avail_in===0)break;if(n=Mn(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=J)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=An(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=An(e,e.ins_h,e.window[i+J-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<J)););}while(e.lookahead<fn&&e.strm.avail_in!==0)},Fn=(e,t)=>{let n=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,r,i,a,o=0,s=e.strm.avail_in;do{if(r=65535,a=e.bi_valid+42>>3,e.strm.avail_out<a||(a=e.strm.avail_out-a,i=e.strstart-e.block_start,r>i+e.strm.avail_in&&(r=i+e.strm.avail_in),r>a&&(r=a),r<n&&(r===0&&t!==K||t===Bt||r!==i+e.strm.avail_in)))break;o=t===K&&r===i+e.strm.avail_in?1:0,It(e,0,0,o),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,X(e.strm),i&&(i>r&&(i=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i,e.block_start+=i,r-=i),r&&(Mn(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(o===0);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?wn:t!==Bt&&t!==K&&e.strm.avail_in===0&&e.strstart===e.block_start?Sn:(a=e.window_size-e.strstart,e.strm.avail_in>a&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,a+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),a>e.strm.avail_in&&(a=e.strm.avail_in),a&&(Mn(e.strm,e.window,e.strstart,a),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.high_water<e.strstart&&(e.high_water=e.strstart),a=e.bi_valid+42>>3,a=e.pending_buf_size-a>65535?65535:e.pending_buf_size-a,n=a>e.w_size?e.w_size:a,i=e.strstart-e.block_start,(i>=n||(i||t===K)&&t!==Bt&&e.strm.avail_in===0&&i<=a)&&(r=i>a?a:i,o=t===K&&e.strm.avail_in===0&&r===i?1:0,It(e,e.block_start,r,o),e.block_start+=r,X(e.strm)),o?Cn:Y)},In=(e,t)=>{let n,r;for(;;){if(e.lookahead<fn){if(Pn(e),e.lookahead<fn&&t===Bt)return Y;if(e.lookahead===0)break}if(n=0,e.lookahead>=J&&(e.ins_h=An(e,e.ins_h,e.window[e.strstart+J-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-fn&&(e.match_length=Nn(e,n)),e.match_length>=J)if(r=Rt(e,e.strstart-e.match_start,e.match_length-J),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=J){e.match_length--;do e.strstart++,e.ins_h=An(e,e.ins_h,e.window[e.strstart+J-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=An(e,e.ins_h,e.window[e.strstart+1]);else r=Rt(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(Z(e,!1),e.strm.avail_out===0))return Y}return e.insert=e.strstart<J-1?e.strstart:J-1,t===K?(Z(e,!0),e.strm.avail_out===0?Cn:wn):e.sym_next&&(Z(e,!1),e.strm.avail_out===0)?Y:Sn},Ln=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<fn){if(Pn(e),e.lookahead<fn&&t===Bt)return Y;if(e.lookahead===0)break}if(n=0,e.lookahead>=J&&(e.ins_h=An(e,e.ins_h,e.window[e.strstart+J-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=J-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-fn&&(e.match_length=Nn(e,n),e.match_length<=5&&(e.strategy===Yt||e.match_length===J&&e.strstart-e.match_start>4096)&&(e.match_length=J-1)),e.prev_length>=J&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-J,r=Rt(e,e.strstart-1-e.prev_match,e.prev_length-J),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=An(e,e.ins_h,e.window[e.strstart+J-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=J-1,e.strstart++,r&&(Z(e,!1),e.strm.avail_out===0))return Y}else if(e.match_available){if(r=Rt(e,0,e.window[e.strstart-1]),r&&Z(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Y}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&=(r=Rt(e,0,e.window[e.strstart-1]),0),e.insert=e.strstart<J-1?e.strstart:J-1,t===K?(Z(e,!0),e.strm.avail_out===0?Cn:wn):e.sym_next&&(Z(e,!1),e.strm.avail_out===0)?Y:Sn},Rn=(e,t)=>{let n,r,i,a,o=e.window;for(;;){if(e.lookahead<=dn){if(Pn(e),e.lookahead<=dn&&t===Bt)return Y;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=J&&e.strstart>0&&(i=e.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){a=e.strstart+dn;do;while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<a);e.match_length=dn-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=J?(n=Rt(e,1,e.match_length-J),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Rt(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Z(e,!1),e.strm.avail_out===0))return Y}return e.insert=0,t===K?(Z(e,!0),e.strm.avail_out===0?Cn:wn):e.sym_next&&(Z(e,!1),e.strm.avail_out===0)?Y:Sn},zn=(e,t)=>{let n;for(;;){if(e.lookahead===0&&(Pn(e),e.lookahead===0)){if(t===Bt)return Y;break}if(e.match_length=0,n=Rt(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Z(e,!1),e.strm.avail_out===0))return Y}return e.insert=0,t===K?(Z(e,!0),e.strm.avail_out===0?Cn:wn):e.sym_next&&(Z(e,!1),e.strm.avail_out===0)?Y:Sn};function Bn(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}var Vn=[new Bn(0,0,0,0,Fn),new Bn(4,4,8,4,In),new Bn(4,5,16,8,In),new Bn(4,6,32,32,In),new Bn(4,4,16,16,Ln),new Bn(8,16,32,32,Ln),new Bn(8,16,128,128,Ln),new Bn(8,32,128,256,Ln),new Bn(32,128,258,1024,Ln),new Bn(32,258,258,4096,Ln)],Hn=e=>{e.window_size=2*e.w_size,On(e.head),e.max_lazy_match=Vn[e.level].max_lazy,e.good_match=Vn[e.level].good_length,e.nice_match=Vn[e.level].nice_length,e.max_chain_length=Vn[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=J-1,e.match_available=0,e.ins_h=0};function Un(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=tn,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(ln*2),this.dyn_dtree=new Uint16Array((2*sn+1)*2),this.bl_tree=new Uint16Array((2*cn+1)*2),On(this.dyn_ltree),On(this.dyn_dtree),On(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(un+1),this.heap=new Uint16Array(2*on+1),On(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*on+1),On(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Wn=e=>{if(!e)return 1;let t=e.state;return!t||t.strm!==e||t.status!==mn&&t.status!==hn&&t.status!==gn&&t.status!==_n&&t.status!==vn&&t.status!==yn&&t.status!==bn&&t.status!==xn?1:0},Gn=e=>{if(Wn(e))return En(e,Gt);e.total_in=e.total_out=0,e.data_type=en;let t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?hn:t.wrap?mn:bn,e.adler=t.wrap===2?0:1,t.last_flush=-2,Ft(t),q},Kn=e=>{let t=Gn(e);return t===q&&Hn(e.state),t},qn=(e,t)=>Wn(e)||e.state.wrap!==2?Gt:(e.state.gzhead=t,q),Jn=(e,t,n,r,i,a)=>{if(!e)return Gt;let o=1;if(t===Jt&&(t=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>nn||n!==tn||r<8||r>15||t<0||t>9||a<0||a>Qt||r===8&&o!==1)return En(e,Gt);r===8&&(r=9);let s=new Un;return e.state=s,s.strm=e,s.status=mn,s.wrap=o,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+J-1)/J),s.window=new Uint8Array(s.w_size*2),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=s.lit_bufsize*4,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=(s.lit_bufsize-1)*3,s.level=t,s.strategy=a,s.method=n,Kn(e)},Yn={deflateInit:(e,t)=>Jn(e,t,tn,rn,an,$t),deflateInit2:Jn,deflateReset:Kn,deflateResetKeep:Gn,deflateSetHeader:qn,deflate:(e,t)=>{if(Wn(e)||t>Ut||t<0)return e?En(e,Gt):Gt;let n=e.state;if(!e.output||e.avail_in!==0&&!e.input||n.status===xn&&t!==K)return En(e,e.avail_out===0?qt:Gt);let r=n.last_flush;if(n.last_flush=t,n.pending!==0){if(X(e),e.avail_out===0)return n.last_flush=-1,q}else if(e.avail_in===0&&Dn(t)<=Dn(r)&&t!==K)return En(e,qt);if(n.status===xn&&e.avail_in!==0)return En(e,qt);if(n.status===mn&&n.wrap===0&&(n.status=bn),n.status===mn){let t=tn+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=Xt||n.level<2?0:n.level<6?1:n.level===6?2:3,t|=r<<6,n.strstart!==0&&(t|=pn),t+=31-t%31,jn(n,t),n.strstart!==0&&(jn(n,e.adler>>>16),jn(n,e.adler&65535)),e.adler=1,n.status=bn,X(e),n.pending!==0)return n.last_flush=-1,q}if(n.status===hn){if(e.adler=0,Q(n,31),Q(n,139),Q(n,8),n.gzhead)Q(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Q(n,n.gzhead.time&255),Q(n,n.gzhead.time>>8&255),Q(n,n.gzhead.time>>16&255),Q(n,n.gzhead.time>>24&255),Q(n,n.level===9?2:n.strategy>=Xt||n.level<2?4:0),Q(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(Q(n,n.gzhead.extra.length&255),Q(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=G(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=gn;else if(Q(n,0),Q(n,0),Q(n,0),Q(n,0),Q(n,0),Q(n,n.level===9?2:n.strategy>=Xt||n.level<2?4:0),Q(n,Tn),n.status=bn,X(e),n.pending!==0)return n.last_flush=-1,q}if(n.status===gn){if(n.gzhead.extra){let t=n.pending,r=(n.gzhead.extra.length&65535)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let i=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=G(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=i,X(e),n.pending!==0)return n.last_flush=-1,q;t=0,r-=i}let i=new Uint8Array(n.gzhead.extra);n.pending_buf.set(i.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>t&&(e.adler=G(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=_n}if(n.status===_n){if(n.gzhead.name){let t=n.pending,r;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>t&&(e.adler=G(e.adler,n.pending_buf,n.pending-t,t)),X(e),n.pending!==0)return n.last_flush=-1,q;t=0}r=n.gzindex<n.gzhead.name.length?n.gzhead.name.charCodeAt(n.gzindex++)&255:0,Q(n,r)}while(r!==0);n.gzhead.hcrc&&n.pending>t&&(e.adler=G(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=vn}if(n.status===vn){if(n.gzhead.comment){let t=n.pending,r;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>t&&(e.adler=G(e.adler,n.pending_buf,n.pending-t,t)),X(e),n.pending!==0)return n.last_flush=-1,q;t=0}r=n.gzindex<n.gzhead.comment.length?n.gzhead.comment.charCodeAt(n.gzindex++)&255:0,Q(n,r)}while(r!==0);n.gzhead.hcrc&&n.pending>t&&(e.adler=G(e.adler,n.pending_buf,n.pending-t,t))}n.status=yn}if(n.status===yn){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(X(e),n.pending!==0))return n.last_flush=-1,q;Q(n,e.adler&255),Q(n,e.adler>>8&255),e.adler=0}if(n.status=bn,X(e),n.pending!==0)return n.last_flush=-1,q}if(e.avail_in!==0||n.lookahead!==0||t!==Bt&&n.status!==xn){let r=n.level===0?Fn(n,t):n.strategy===Xt?zn(n,t):n.strategy===Zt?Rn(n,t):Vn[n.level].func(n,t);if((r===Cn||r===wn)&&(n.status=xn),r===Y||r===Cn)return e.avail_out===0&&(n.last_flush=-1),q;if(r===Sn&&(t===Vt?zt(n):t!==Ut&&(It(n,0,0,!1),t===Ht&&(On(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),X(e),e.avail_out===0))return n.last_flush=-1,q}return t===K?n.wrap<=0?Wt:(n.wrap===2?(Q(n,e.adler&255),Q(n,e.adler>>8&255),Q(n,e.adler>>16&255),Q(n,e.adler>>24&255),Q(n,e.total_in&255),Q(n,e.total_in>>8&255),Q(n,e.total_in>>16&255),Q(n,e.total_in>>24&255)):(jn(n,e.adler>>>16),jn(n,e.adler&65535)),X(e),n.wrap>0&&(n.wrap=-n.wrap),n.pending===0?Wt:q):q},deflateEnd:e=>{if(Wn(e))return Gt;let t=e.state.status;return e.state=null,t===bn?En(e,Kt):q},deflateSetDictionary:(e,t)=>{let n=t.length;if(Wn(e))return Gt;let r=e.state,i=r.wrap;if(i===2||i===1&&r.status!==mn||r.lookahead)return Gt;if(i===1&&(e.adler=jt(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){i===0&&(On(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}let a=e.avail_in,o=e.next_in,s=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,Pn(r);r.lookahead>=J;){let e=r.strstart,t=r.lookahead-(J-1);do r.ins_h=An(r,r.ins_h,r.window[e+J-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++;while(--t);r.strstart=e,r.lookahead=J-1,Pn(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=J-1,r.match_available=0,e.next_in=o,e.input=s,e.avail_in=a,r.wrap=i,q},deflateInfo:`pako deflate (from Nodeca project)`},Xn=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),Zn={assign:function(e){let t=Array.prototype.slice.call(arguments,1);for(;t.length;){let n=t.shift();if(n){if(typeof n!=`object`)throw TypeError(n+`must be non-object`);for(let t in n)Xn(n,t)&&(e[t]=n[t])}}return e},flattenChunks:e=>{let t=0;for(let n=0,r=e.length;n<r;n++)t+=e[n].length;let n=new Uint8Array(t);for(let t=0,r=0,i=e.length;t<i;t++){let i=e[t];n.set(i,r),r+=i.length}return n}},Qn=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Qn=!1}var $n=new Uint8Array(256);for(let e=0;e<256;e++)$n[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;$n[254]=$n[254]=1;var er=e=>{if(typeof TextEncoder==`function`&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,r,i,a,o=e.length,s=0;for(i=0;i<o;i++)n=e.charCodeAt(i),(n&64512)==55296&&i+1<o&&(r=e.charCodeAt(i+1),(r&64512)==56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),a=0,i=0;a<s;i++)n=e.charCodeAt(i),(n&64512)==55296&&i+1<o&&(r=e.charCodeAt(i+1),(r&64512)==56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|n&63):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|n&63):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|n&63);return t},tr=(e,t)=>{if(t<65534&&e.subarray&&Qn)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n=``;for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n},nr={string2buf:er,buf2string:(e,t)=>{let n=t||e.length;if(typeof TextDecoder==`function`&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let r,i,a=Array(n*2);for(i=0,r=0;r<n;){let t=e[r++];if(t<128){a[i++]=t;continue}let o=$n[t];if(o>4){a[i++]=65533,r+=o-1;continue}for(t&=o===2?31:o===3?15:7;o>1&&r<n;)t=t<<6|e[r++]&63,o--;if(o>1){a[i++]=65533;continue}t<65536?a[i++]=t:(t-=65536,a[i++]=55296|t>>10&1023,a[i++]=56320|t&1023)}return tr(a,i)},utf8border:(e,t)=>{t||=e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)==128;)n--;return n<0||n===0?t:n+$n[e[n]]>t?n:t}};function rr(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg=``,this.state=null,this.data_type=2,this.adler=0}var ir=rr,ar=Object.prototype.toString,{Z_NO_FLUSH:or,Z_SYNC_FLUSH:sr,Z_FULL_FLUSH:cr,Z_FINISH:lr,Z_OK:ur,Z_STREAM_END:dr,Z_DEFAULT_COMPRESSION:fr,Z_DEFAULT_STRATEGY:pr,Z_DEFLATED:mr}=Pt;function hr(e){this.options=Zn.assign({level:fr,method:mr,chunkSize:16384,windowBits:15,memLevel:8,strategy:pr},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg=``,this.ended=!1,this.chunks=[],this.strm=new ir,this.strm.avail_out=0;let n=Yn.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==ur)throw Error(Nt[n]);if(t.header&&Yn.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e=typeof t.dictionary==`string`?nr.string2buf(t.dictionary):ar.call(t.dictionary)===`[object ArrayBuffer]`?new Uint8Array(t.dictionary):t.dictionary,n=Yn.deflateSetDictionary(this.strm,e),n!==ur)throw Error(Nt[n]);this._dict_set=!0}}hr.prototype.push=function(e,t){let n=this.strm,r=this.options.chunkSize,i,a;if(this.ended)return!1;for(a=t===~~t?t:t===!0?lr:or,typeof e==`string`?n.input=nr.string2buf(e):ar.call(e)===`[object ArrayBuffer]`?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(a===sr||a===cr)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(i=Yn.deflate(n,a),i===dr)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=Yn.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===ur;if(n.avail_out===0){this.onData(n.output);continue}if(a>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0},hr.prototype.onData=function(e){this.chunks.push(e)},hr.prototype.onEnd=function(e){e===ur&&(this.result=Zn.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function gr(e,t){let n=new hr(t);if(n.push(e,!0),n.err)throw n.msg||Nt[n.err];return n.result}function _r(e,t){return t||={},t.raw=!0,gr(e,t)}function vr(e,t){return t||={},t.gzip=!0,gr(e,t)}var yr={Deflate:hr,deflate:gr,deflateRaw:_r,gzip:vr,constants:Pt},br=16209,xr=16191,Sr=function(e,t){let n,r,i,a,o,s,c,l,u,d,f,p,m,h,g,_,v,y,b,x,S,C,w,T,E=e.state;n=e.next_in,w=e.input,r=n+(e.avail_in-5),i=e.next_out,T=e.output,a=i-(t-e.avail_out),o=i+(e.avail_out-257),s=E.dmax,c=E.wsize,l=E.whave,u=E.wnext,d=E.window,f=E.hold,p=E.bits,m=E.lencode,h=E.distcode,g=(1<<E.lenbits)-1,_=(1<<E.distbits)-1;top:do{p<15&&(f+=w[n++]<<p,p+=8,f+=w[n++]<<p,p+=8),v=m[f&g];dolen:for(;;){if(y=v>>>24,f>>>=y,p-=y,y=v>>>16&255,y===0)T[i++]=v&65535;else if(y&16){b=v&65535,y&=15,y&&(p<y&&(f+=w[n++]<<p,p+=8),b+=f&(1<<y)-1,f>>>=y,p-=y),p<15&&(f+=w[n++]<<p,p+=8,f+=w[n++]<<p,p+=8),v=h[f&_];dodist:for(;;){if(y=v>>>24,f>>>=y,p-=y,y=v>>>16&255,y&16){if(x=v&65535,y&=15,p<y&&(f+=w[n++]<<p,p+=8,p<y&&(f+=w[n++]<<p,p+=8)),x+=f&(1<<y)-1,x>s){e.msg=`invalid distance too far back`,E.mode=br;break top}if(f>>>=y,p-=y,y=i-a,x>y){if(y=x-y,y>l&&E.sane){e.msg=`invalid distance too far back`,E.mode=br;break top}if(S=0,C=d,u===0){if(S+=c-y,y<b){b-=y;do T[i++]=d[S++];while(--y);S=i-x,C=T}}else if(u<y){if(S+=c+u-y,y-=u,y<b){b-=y;do T[i++]=d[S++];while(--y);if(S=0,u<b){y=u,b-=y;do T[i++]=d[S++];while(--y);S=i-x,C=T}}}else if(S+=u-y,y<b){b-=y;do T[i++]=d[S++];while(--y);S=i-x,C=T}for(;b>2;)T[i++]=C[S++],T[i++]=C[S++],T[i++]=C[S++],b-=3;b&&(T[i++]=C[S++],b>1&&(T[i++]=C[S++]))}else{S=i-x;do T[i++]=T[S++],T[i++]=T[S++],T[i++]=T[S++],b-=3;while(b>2);b&&(T[i++]=T[S++],b>1&&(T[i++]=T[S++]))}}else if(y&64){e.msg=`invalid distance code`,E.mode=br;break top}else{v=h[(v&65535)+(f&(1<<y)-1)];continue dodist}break}}else if(y&64)if(y&32){E.mode=xr;break top}else{e.msg=`invalid literal/length code`,E.mode=br;break top}else{v=m[(v&65535)+(f&(1<<y)-1)];continue dolen}break}}while(n<r&&i<o);b=p>>3,n-=b,p-=b<<3,f&=(1<<p)-1,e.next_in=n,e.next_out=i,e.avail_in=n<r?5+(r-n):5-(n-r),e.avail_out=i<o?257+(o-i):257-(i-o),E.hold=f,E.bits=p},Cr=15,wr=852,Tr=592,Er=0,Dr=1,Or=2,kr=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Ar=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),jr=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Mr=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Nr=(e,t,n,r,i,a,o,s)=>{let c=s.bits,l=0,u=0,d=0,f=0,p=0,m=0,h=0,g=0,_=0,v=0,y,b,x,S,C,w=null,T,E=new Uint16Array(Cr+1),D=new Uint16Array(Cr+1),O=null,k,ee,te;for(l=0;l<=Cr;l++)E[l]=0;for(u=0;u<r;u++)E[t[n+u]]++;for(p=c,f=Cr;f>=1&&E[f]===0;f--);if(p>f&&(p=f),f===0)return i[a++]=20971520,i[a++]=20971520,s.bits=1,0;for(d=1;d<f&&E[d]===0;d++);for(p<d&&(p=d),g=1,l=1;l<=Cr;l++)if(g<<=1,g-=E[l],g<0)return-1;if(g>0&&(e===Er||f!==1))return-1;for(D[1]=0,l=1;l<Cr;l++)D[l+1]=D[l]+E[l];for(u=0;u<r;u++)t[n+u]!==0&&(o[D[t[n+u]]++]=u);if(e===Er?(w=O=o,T=20):e===Dr?(w=kr,O=Ar,T=257):(w=jr,O=Mr,T=0),v=0,u=0,l=d,C=a,m=p,h=0,x=-1,_=1<<p,S=_-1,e===Dr&&_>wr||e===Or&&_>Tr)return 1;for(;;){k=l-h,o[u]+1<T?(ee=0,te=o[u]):o[u]>=T?(ee=O[o[u]-T],te=w[o[u]-T]):(ee=96,te=0),y=1<<l-h,b=1<<m,d=b;do b-=y,i[C+(v>>h)+b]=k<<24|ee<<16|te|0;while(b!==0);for(y=1<<l-1;v&y;)y>>=1;if(y===0?v=0:(v&=y-1,v+=y),u++,--E[l]===0){if(l===f)break;l=t[n+o[u]]}if(l>p&&(v&S)!==x){for(h===0&&(h=p),C+=d,m=l-h,g=1<<m;m+h<f&&(g-=E[m+h],!(g<=0));)m++,g<<=1;if(_+=1<<m,e===Dr&&_>wr||e===Or&&_>Tr)return 1;x=v&S,i[x]=p<<24|m<<16|C-a|0}}return v!==0&&(i[C+v]=l-h<<24|4194304),s.bits=p,0},Pr=0,Fr=1,Ir=2,{Z_FINISH:Lr,Z_BLOCK:Rr,Z_TREES:zr,Z_OK:Br,Z_STREAM_END:Vr,Z_NEED_DICT:Hr,Z_STREAM_ERROR:Ur,Z_DATA_ERROR:Wr,Z_MEM_ERROR:Gr,Z_BUF_ERROR:Kr,Z_DEFLATED:qr}=Pt,Jr=16180,Yr=16181,Xr=16182,Zr=16183,Qr=16184,$r=16185,ei=16186,ti=16187,ni=16188,ri=16189,ii=16190,ai=16191,oi=16192,si=16193,ci=16194,li=16195,ui=16196,di=16197,fi=16198,pi=16199,mi=16200,hi=16201,gi=16202,_i=16203,vi=16204,yi=16205,bi=16206,xi=16207,Si=16208,$=16209,Ci=16210,wi=16211,Ti=852,Ei=592,Di=15,Oi=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function ki(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var Ai=e=>{if(!e)return 1;let t=e.state;return!t||t.strm!==e||t.mode<Jr||t.mode>wi?1:0},ji=e=>{if(Ai(e))return Ur;let t=e.state;return e.total_in=e.total_out=t.total=0,e.msg=``,t.wrap&&(e.adler=t.wrap&1),t.mode=Jr,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(Ti),t.distcode=t.distdyn=new Int32Array(Ei),t.sane=1,t.back=-1,Br},Mi=e=>{if(Ai(e))return Ur;let t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,ji(e)},Ni=(e,t)=>{let n;if(Ai(e))return Ur;let r=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Ur:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,Mi(e))},Pi=(e,t)=>{if(!e)return Ur;let n=new ki;e.state=n,n.strm=e,n.window=null,n.mode=Jr;let r=Ni(e,t);return r!==Br&&(e.state=null),r},Fi=e=>Pi(e,Di),Ii=!0,Li,Ri,zi=e=>{if(Ii){Li=new Int32Array(512),Ri=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Nr(Fr,e.lens,0,288,Li,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Nr(Ir,e.lens,0,32,Ri,0,e.work,{bits:5}),Ii=!1}e.lencode=Li,e.lenbits=9,e.distcode=Ri,e.distbits=5},Bi=(e,t,n,r)=>{let i,a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(t.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),a.window.set(t.subarray(n-r,n-r+i),a.wnext),r-=i,r?(a.window.set(t.subarray(n-r,n),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},Vi={inflateReset:Mi,inflateReset2:Ni,inflateResetKeep:ji,inflateInit:Fi,inflateInit2:Pi,inflate:(e,t)=>{let n,r,i,a,o,s,c,l,u,d,f,p,m,h,g=0,_,v,y,b,x,S,C,w,T=new Uint8Array(4),E,D,O=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ai(e)||!e.output||!e.input&&e.avail_in!==0)return Ur;n=e.state,n.mode===ai&&(n.mode=oi),o=e.next_out,i=e.output,c=e.avail_out,a=e.next_in,r=e.input,s=e.avail_in,l=n.hold,u=n.bits,d=s,f=c,w=Br;inf_leave:for(;;)switch(n.mode){case Jr:if(n.wrap===0){n.mode=oi;break}for(;u<16;){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}if(n.wrap&2&&l===35615){n.wbits===0&&(n.wbits=15),n.check=0,T[0]=l&255,T[1]=l>>>8&255,n.check=G(n.check,T,2,0),l=0,u=0,n.mode=Yr;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((l&255)<<8)+(l>>8))%31){e.msg=`incorrect header check`,n.mode=$;break}if((l&15)!==qr){e.msg=`unknown compression method`,n.mode=$;break}if(l>>>=4,u-=4,C=(l&15)+8,n.wbits===0&&(n.wbits=C),C>15||C>n.wbits){e.msg=`invalid window size`,n.mode=$;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=l&512?ri:ai,l=0,u=0;break;case Yr:for(;u<16;){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}if(n.flags=l,(n.flags&255)!==qr){e.msg=`unknown compression method`,n.mode=$;break}if(n.flags&57344){e.msg=`unknown header flags set`,n.mode=$;break}n.head&&(n.head.text=l>>8&1),n.flags&512&&n.wrap&4&&(T[0]=l&255,T[1]=l>>>8&255,n.check=G(n.check,T,2,0)),l=0,u=0,n.mode=Xr;case Xr:for(;u<32;){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}n.head&&(n.head.time=l),n.flags&512&&n.wrap&4&&(T[0]=l&255,T[1]=l>>>8&255,T[2]=l>>>16&255,T[3]=l>>>24&255,n.check=G(n.check,T,4,0)),l=0,u=0,n.mode=Zr;case Zr:for(;u<16;){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}n.head&&(n.head.xflags=l&255,n.head.os=l>>8),n.flags&512&&n.wrap&4&&(T[0]=l&255,T[1]=l>>>8&255,n.check=G(n.check,T,2,0)),l=0,u=0,n.mode=Qr;case Qr:if(n.flags&1024){for(;u<16;){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}n.length=l,n.head&&(n.head.extra_len=l),n.flags&512&&n.wrap&4&&(T[0]=l&255,T[1]=l>>>8&255,n.check=G(n.check,T,2,0)),l=0,u=0}else n.head&&(n.head.extra=null);n.mode=$r;case $r:if(n.flags&1024&&(p=n.length,p>s&&(p=s),p&&(n.head&&(C=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(a,a+p),C)),n.flags&512&&n.wrap&4&&(n.check=G(n.check,r,p,a)),s-=p,a+=p,n.length-=p),n.length))break inf_leave;n.length=0,n.mode=ei;case ei:if(n.flags&2048){if(s===0)break inf_leave;p=0;do C=r[a+ p++],n.head&&C&&n.length<65536&&(n.head.name+=String.fromCharCode(C));while(C&&p<s);if(n.flags&512&&n.wrap&4&&(n.check=G(n.check,r,p,a)),s-=p,a+=p,C)break inf_leave}else n.head&&(n.head.name=null);n.length=0,n.mode=ti;case ti:if(n.flags&4096){if(s===0)break inf_leave;p=0;do C=r[a+ p++],n.head&&C&&n.length<65536&&(n.head.comment+=String.fromCharCode(C));while(C&&p<s);if(n.flags&512&&n.wrap&4&&(n.check=G(n.check,r,p,a)),s-=p,a+=p,C)break inf_leave}else n.head&&(n.head.comment=null);n.mode=ni;case ni:if(n.flags&512){for(;u<16;){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}if(n.wrap&4&&l!==(n.check&65535)){e.msg=`header crc mismatch`,n.mode=$;break}l=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=ai;break;case ri:for(;u<32;){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}e.adler=n.check=Oi(l),l=0,u=0,n.mode=ii;case ii:if(n.havedict===0)return e.next_out=o,e.avail_out=c,e.next_in=a,e.avail_in=s,n.hold=l,n.bits=u,Hr;e.adler=n.check=1,n.mode=ai;case ai:if(t===Rr||t===zr)break inf_leave;case oi:if(n.last){l>>>=u&7,u-=u&7,n.mode=bi;break}for(;u<3;){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}switch(n.last=l&1,l>>>=1,--u,l&3){case 0:n.mode=si;break;case 1:if(zi(n),n.mode=pi,t===zr){l>>>=2,u-=2;break inf_leave}break;case 2:n.mode=ui;break;case 3:e.msg=`invalid block type`,n.mode=$}l>>>=2,u-=2;break;case si:for(l>>>=u&7,u-=u&7;u<32;){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}if((l&65535)!=(l>>>16^65535)){e.msg=`invalid stored block lengths`,n.mode=$;break}if(n.length=l&65535,l=0,u=0,n.mode=ci,t===zr)break inf_leave;case ci:n.mode=li;case li:if(p=n.length,p){if(p>s&&(p=s),p>c&&(p=c),p===0)break inf_leave;i.set(r.subarray(a,a+p),o),s-=p,a+=p,c-=p,o+=p,n.length-=p;break}n.mode=ai;break;case ui:for(;u<14;){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}if(n.nlen=(l&31)+257,l>>>=5,u-=5,n.ndist=(l&31)+1,l>>>=5,u-=5,n.ncode=(l&15)+4,l>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg=`too many length or distance symbols`,n.mode=$;break}n.have=0,n.mode=di;case di:for(;n.have<n.ncode;){for(;u<3;){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}n.lens[O[n.have++]]=l&7,l>>>=3,u-=3}for(;n.have<19;)n.lens[O[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,E={bits:n.lenbits},w=Nr(Pr,n.lens,0,19,n.lencode,0,n.work,E),n.lenbits=E.bits,w){e.msg=`invalid code lengths set`,n.mode=$;break}n.have=0,n.mode=fi;case fi:for(;n.have<n.nlen+n.ndist;){for(;g=n.lencode[l&(1<<n.lenbits)-1],_=g>>>24,v=g>>>16&255,y=g&65535,!(_<=u);){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}if(y<16)l>>>=_,u-=_,n.lens[n.have++]=y;else{if(y===16){for(D=_+2;u<D;){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}if(l>>>=_,u-=_,n.have===0){e.msg=`invalid bit length repeat`,n.mode=$;break}C=n.lens[n.have-1],p=3+(l&3),l>>>=2,u-=2}else if(y===17){for(D=_+3;u<D;){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}l>>>=_,u-=_,C=0,p=3+(l&7),l>>>=3,u-=3}else{for(D=_+7;u<D;){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}l>>>=_,u-=_,C=0,p=11+(l&127),l>>>=7,u-=7}if(n.have+p>n.nlen+n.ndist){e.msg=`invalid bit length repeat`,n.mode=$;break}for(;p--;)n.lens[n.have++]=C}}if(n.mode===$)break;if(n.lens[256]===0){e.msg=`invalid code -- missing end-of-block`,n.mode=$;break}if(n.lenbits=9,E={bits:n.lenbits},w=Nr(Fr,n.lens,0,n.nlen,n.lencode,0,n.work,E),n.lenbits=E.bits,w){e.msg=`invalid literal/lengths set`,n.mode=$;break}if(n.distbits=6,n.distcode=n.distdyn,E={bits:n.distbits},w=Nr(Ir,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,E),n.distbits=E.bits,w){e.msg=`invalid distances set`,n.mode=$;break}if(n.mode=pi,t===zr)break inf_leave;case pi:n.mode=mi;case mi:if(s>=6&&c>=258){e.next_out=o,e.avail_out=c,e.next_in=a,e.avail_in=s,n.hold=l,n.bits=u,Sr(e,f),o=e.next_out,i=e.output,c=e.avail_out,a=e.next_in,r=e.input,s=e.avail_in,l=n.hold,u=n.bits,n.mode===ai&&(n.back=-1);break}for(n.back=0;g=n.lencode[l&(1<<n.lenbits)-1],_=g>>>24,v=g>>>16&255,y=g&65535,!(_<=u);){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}if(v&&!(v&240)){for(b=_,x=v,S=y;g=n.lencode[S+((l&(1<<b+x)-1)>>b)],_=g>>>24,v=g>>>16&255,y=g&65535,!(b+_<=u);){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}l>>>=b,u-=b,n.back+=b}if(l>>>=_,u-=_,n.back+=_,n.length=y,v===0){n.mode=yi;break}if(v&32){n.back=-1,n.mode=ai;break}if(v&64){e.msg=`invalid literal/length code`,n.mode=$;break}n.extra=v&15,n.mode=hi;case hi:if(n.extra){for(D=n.extra;u<D;){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=gi;case gi:for(;g=n.distcode[l&(1<<n.distbits)-1],_=g>>>24,v=g>>>16&255,y=g&65535,!(_<=u);){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}if(!(v&240)){for(b=_,x=v,S=y;g=n.distcode[S+((l&(1<<b+x)-1)>>b)],_=g>>>24,v=g>>>16&255,y=g&65535,!(b+_<=u);){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}l>>>=b,u-=b,n.back+=b}if(l>>>=_,u-=_,n.back+=_,v&64){e.msg=`invalid distance code`,n.mode=$;break}n.offset=y,n.extra=v&15,n.mode=_i;case _i:if(n.extra){for(D=n.extra;u<D;){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg=`invalid distance too far back`,n.mode=$;break}n.mode=vi;case vi:if(c===0)break inf_leave;if(p=f-c,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){e.msg=`invalid distance too far back`,n.mode=$;break}p>n.wnext?(p-=n.wnext,m=n.wsize-p):m=n.wnext-p,p>n.length&&(p=n.length),h=n.window}else h=i,m=o-n.offset,p=n.length;p>c&&(p=c),c-=p,n.length-=p;do i[o++]=h[m++];while(--p);n.length===0&&(n.mode=mi);break;case yi:if(c===0)break inf_leave;i[o++]=n.length,c--,n.mode=mi;break;case bi:if(n.wrap){for(;u<32;){if(s===0)break inf_leave;s--,l|=r[a++]<<u,u+=8}if(f-=c,e.total_out+=f,n.total+=f,n.wrap&4&&f&&(e.adler=n.check=n.flags?G(n.check,i,f,o-f):jt(n.check,i,f,o-f)),f=c,n.wrap&4&&(n.flags?l:Oi(l))!==n.check){e.msg=`incorrect data check`,n.mode=$;break}l=0,u=0}n.mode=xi;case xi:if(n.wrap&&n.flags){for(;u<32;){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}if(n.wrap&4&&l!==(n.total&4294967295)){e.msg=`incorrect length check`,n.mode=$;break}l=0,u=0}n.mode=Si;case Si:w=Vr;break inf_leave;case $:w=Wr;break inf_leave;case Ci:return Gr;case wi:default:return Ur}return e.next_out=o,e.avail_out=c,e.next_in=a,e.avail_in=s,n.hold=l,n.bits=u,(n.wsize||f!==e.avail_out&&n.mode<$&&(n.mode<bi||t!==Lr))&&Bi(e,e.output,e.next_out,f-e.avail_out),d-=e.avail_in,f-=e.avail_out,e.total_in+=d,e.total_out+=f,n.total+=f,n.wrap&4&&f&&(e.adler=n.check=n.flags?G(n.check,i,f,e.next_out-f):jt(n.check,i,f,e.next_out-f)),e.data_type=n.bits+(n.last?64:0)+(n.mode===ai?128:0)+(n.mode===pi||n.mode===ci?256:0),(d===0&&f===0||t===Lr)&&w===Br&&(w=Kr),w},inflateEnd:e=>{if(Ai(e))return Ur;let t=e.state;return t.window&&=null,e.state=null,Br},inflateGetHeader:(e,t)=>{if(Ai(e))return Ur;let n=e.state;return n.wrap&2?(n.head=t,t.done=!1,Br):Ur},inflateSetDictionary:(e,t)=>{let n=t.length,r,i,a;return Ai(e)||(r=e.state,r.wrap!==0&&r.mode!==ii)?Ur:r.mode===ii&&(i=1,i=jt(i,t,n,0),i!==r.check)?Wr:(a=Bi(e,t,n,n),a?(r.mode=Ci,Gr):(r.havedict=1,Br))},inflateInfo:`pako inflate (from Nodeca project)`};function Hi(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name=``,this.comment=``,this.hcrc=0,this.done=!1}var Ui=Hi,Wi=Object.prototype.toString,{Z_NO_FLUSH:Gi,Z_FINISH:Ki,Z_OK:qi,Z_STREAM_END:Ji,Z_NEED_DICT:Yi,Z_STREAM_ERROR:Xi,Z_DATA_ERROR:Zi,Z_MEM_ERROR:Qi}=Pt;function $i(e){this.options=Zn.assign({chunkSize:1024*64,windowBits:15,to:``},e||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg=``,this.ended=!1,this.chunks=[],this.strm=new ir,this.strm.avail_out=0;let n=Vi.inflateInit2(this.strm,t.windowBits);if(n!==qi||(this.header=new Ui,Vi.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary==`string`?t.dictionary=nr.string2buf(t.dictionary):Wi.call(t.dictionary)===`[object ArrayBuffer]`&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Vi.inflateSetDictionary(this.strm,t.dictionary),n!==qi))))throw Error(Nt[n])}$i.prototype.push=function(e,t){let n=this.strm,r=this.options.chunkSize,i=this.options.dictionary,a,o,s;if(this.ended)return!1;for(o=t===~~t?t:t===!0?Ki:Gi,Wi.call(e)===`[object ArrayBuffer]`?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),a=Vi.inflate(n,o),a===Yi&&i&&(a=Vi.inflateSetDictionary(n,i),a===qi?a=Vi.inflate(n,o):a===Zi&&(a=Yi));n.avail_in>0&&a===Ji&&n.state.wrap>0&&e[n.next_in]!==0;)Vi.inflateReset(n),a=Vi.inflate(n,o);switch(a){case Xi:case Zi:case Yi:case Qi:return this.onEnd(a),this.ended=!0,!1}if(s=n.avail_out,n.next_out&&(n.avail_out===0||a===Ji))if(this.options.to===`string`){let e=nr.utf8border(n.output,n.next_out),t=n.next_out-e,i=nr.buf2string(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(i)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(a===qi&&s===0)){if(a===Ji)return a=Vi.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(n.avail_in===0)break}}return!0},$i.prototype.onData=function(e){this.chunks.push(e)},$i.prototype.onEnd=function(e){e===qi&&(this.options.to===`string`?this.result=this.chunks.join(``):this.result=Zn.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function ea(e,t){let n=new $i(t);if(n.push(e),n.err)throw n.msg||Nt[n.err];return n.result}function ta(e,t){return t||={},t.raw=!0,ea(e,t)}var na={Inflate:$i,inflate:ea,inflateRaw:ta,ungzip:ea,constants:Pt},{Deflate:ra,deflate:ia,deflateRaw:aa,gzip:oa}=yr,{Inflate:sa,inflate:ca,inflateRaw:la,ungzip:ua}=na,da=oa;function fa(e){if(typeof window<`u`&&typeof window.btoa==`function`){let t=``;for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return window.btoa(t)}return Buffer.from(e).toString(`base64`)}function pa(e){return fa(da(e))}var ma=null;function ha(){let e=globalThis;if(e&&typeof e==`object`){if(e.phiSigner&&typeof e.phiSigner.sign==`function`)return e.phiSigner;if(e.kaiSigner&&typeof e.kaiSigner.sign==`function`)return e.kaiSigner}return null}function ga(){return ma??ha()}async function _a(e){let t=ga();if(!t)return;let n=e.toLowerCase(),r=await t.sign(n);return{alg:`harmonic-sig`,public:t.publicKey,value:r.toLowerCase()}}var va={name:`ECDSA`,namedCurve:`P-256`},ya={name:`ECDSA`,hash:{name:`SHA-256`}};async function ba(e){let t=!!e?.extractablePrivate,n=Ta(),r=await n.generateKey(va,t,[`sign`,`verify`]);return{publicKeyJwk:await n.exportKey(`jwk`,r.publicKey),privateKey:r.privateKey}}async function xa(e,t){let n=Ta(),r=Sa(t),i=await n.sign(ya,e,r);return wa(new Uint8Array(i))}function Sa(e){if(e instanceof ArrayBuffer)return e;let t=new Uint8Array(e.byteLength);return t.set(e),t.buffer}function Ca(e){let t=``;for(let n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return btoa(t)}function wa(e){return(typeof e==`string`?e:Ca(e)).replace(/\+/g,`-`).replace(/\//g,`_`).replace(/=+$/g,``)}function Ta(){let e=globalThis.crypto;if(!e||!e.subtle)throw Error(`WebCrypto subtle API not available. Use a secure (HTTPS) context.`);return e.subtle}function Ea(e){let t={v:1,pulse:e.pulse,beat:e.beat,stepIndex:e.stepIndex,chakraDay:e.chakraDay,stepsPerBeat:e.stepsPerBeat,kaiSignature:e.kaiSignature??null,userPhiKey:e.userPhiKey??null,ts:e.ts??null};return JSON.stringify(t)}async function Da(e){return{hash:await Ne(new TextEncoder().encode(Ea(e)))}}async function Oa(e){if(e.length===0)return await Ne(new Uint8Array);let t=e.map(e=>e.hash);for(;t.length>1;){let e=[];for(let n=0;n<t.length;n+=2){let r=t[n],i=t[n+1]??t[n],a=new TextEncoder().encode(r+i);e.push(await Ne(a))}t=e}return t[0]}async function ka(e){let t=await Promise.all(e.map(Da));return{v:1,leaves:t,root:await Oa(t),lastPulse:Math.max(...e.map(e=>e.pulse),0)}}async function Aa(e){let t=JSON.stringify(e);return{v:1,codec:`gzip+base64`,payload:pa(new TextEncoder().encode(t))}}const ja={async publish(e){return{headCid:``}}};async function Ma(e){let{ipfs:t=ja,packedLedgerBytes:n,prevCid:r,sign:i,pubKeyJwk:a,merkleRoot:o,pulse:s}=e,{headCid:c}=await t.publish(n).catch(()=>({headCid:``})),l=``;return c&&i&&(l=Na(await i(new TextEncoder().encode(`${c}|${o}|${s}`)))),{headCid:c,prevCid:r,merkleRoot:o,pulse:s,headSig:l,pubKeyJwk:a}}function Na(e){let t=``,n=32768;for(let r=0;r<e.length;r+=n){let i=e.subarray(r,r+n),a=``;for(let e=0;e<i.length;e++)a+=String.fromCharCode(i[e]??0);t+=a}return globalThis.btoa(t).replace(/\+/g,`-`).replace(/\//g,`_`).replace(/=+$/g,``)}function Pa(e){if(e instanceof ArrayBuffer)return e.slice(0);let t=e,n=new Uint8Array(t.byteLength);return n.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),n.buffer}function Fa(e){let t=(e.algorithm?.name||``).toUpperCase();return t===`ECDSA`?{name:`ECDSA`,hash:{name:`SHA-256`}}:t===`ED25519`?{name:`Ed25519`}:t===`ED448`?{name:`Ed448`}:t===`RSA-PSS`?{name:`RSA-PSS`,saltLength:32}:{name:e.algorithm.name}}var Ia=e=>{let t=(e||``).toLowerCase().replace(/\s+/g,` `).trim();return t===`root`?`Root`:t===`sacral`?`Sacral`:t===`solar plexus`||t===`solarplexus`?`Solar Plexus`:t===`heart`?`Heart`:t===`throat`?`Throat`:t===`third eye`||t===`thirdeye`||t===`third-eye`?`Third Eye`:`Crown`};async function La(e){let{canon:t,hashMode:n,chakraGate:r,kaiSignature:i,userPhiKey:a,origin:o,title:c,weekdayResolved:l,valuationSource:u,mintSeal:d,frequencyHzCurrent:f,creatorResolved:p}=e,m=new Date().toISOString(),h=(n??`moment`)===`moment`,g={v:`1.0`,title:c,creator:p.creator,creatorAlg:p.creatorAlg,creatorId:p.creatorId,pulse:t.pulse,...h?{timestamp:m}:{}},_=ne(c,300)??`Day Seal: ${t.beat}:${t.stepIndex} • Kai-Pulse ${t.pulse}`,v={v:`1.0`,kaiSignature:i??``,phikey:a??``,pulse:t.pulse,beat:t.beat,stepIndex:t.stepIndex,chakraDay:t.chakraDayKey,chakraGate:r,kaiPulse:t.pulse,stepsPerBeat:t.stepsPerBeat,...h?{timestamp:m}:{},eternalRecord:_,creatorResolved:g.creator,origin:o??(typeof window<`u`?window.location.origin:``),proofHints:{scheme:`groth16-poseidon`,api:`/api/proof/sigil`,explorer:`/keystream/hash/<hash>`},zkPoseidonHash:`7110303097080024260800444665787206606103183587082596139871399733998958991511`,zkProof:{pi_a:[`19856134890912647180646267915828904326160277174078581619567068747845749027250`,`10106391353796902212003294779502313309244930326624220933310482777016833544602`,`1`],pi_b:[[`15332824283171511432216330300808558575577774780613056045013182220474274609373`,`520780065640616094309336546820413644814574749252299536726307039414737648361`],[`19765599185680435083316275297102369245623399312670847112193589466041197993879`,`18523858679421850672423367816452968252787306686524085684854491935388533516266`],[`1`,`0`]],pi_c:[`17563530240039003419001811545927065585981558862932312235837455317235418749777`,`8962254954310810065423022980767523639237247171719646270365369937175985524426`,`1`]}},y=Me({v:v.v,kaiSignature:v.kaiSignature,phikey:v.phikey,pulse:v.pulse,beat:v.beat,stepIndex:v.stepIndex,chakraDay:v.chakraDay,chakraGate:v.chakraGate,kaiPulse:v.kaiPulse,stepsPerBeat:v.stepsPerBeat,timestamp:v.timestamp,eternalRecord:v.eternalRecord,creatorResolved:v.creatorResolved,origin:v.origin,proofHints:v.proofHints,zkPoseidonHash:v.zkPoseidonHash,zkProof:v.zkProof,ownerPubKey:v.ownerPubKey?Ce(v.ownerPubKey):void 0,ownerSig:v.ownerSig}),b=(await Ne(y)).toLowerCase(),x=Array.from(await me(y)).map(e=>e.toString(16).padStart(2,`0`)).join(``),S=pa(y),C;ga()&&(C=await _a(b));let w={payloadEncoding:`gzip+base64`,payloadHash:{alg:`blake3`,value:b},payloadHashSecondary:{alg:`sha256`,value:x},payloadSignature:C??{alg:`harmonic-sig`,public:a??p.creatorId,value:``}},T=Pa(A(Me({parentCanonical:`optional-parent-ref`,parentStateRoot:`optional-state-root`,eventKind:`mint`,pulse:t.pulse,beat:t.beat,stepIndex:t.stepIndex,chakraDay:t.chakraDayKey,childNonce:`${t.beat}-${t.stepIndex}`,amount:`1.000`,expiresAtPulse:t.pulse+12,lineageCommitment:`optional-hash-of-lineage`}))),{publicKeyJwk:E,privateKey:D}=await ba(),O=await xa(D,T);v.ownerPubKey=E,v.ownerSig=O;let k=s(b,{pulse:t.pulse,beat:t.beat,stepIndex:t.stepIndex,chakraDay:Ia(String(t.chakraDayKey)),stepsPerBeat:t.stepsPerBeat,canonicalHash:b,exportedAt:m,expiresAtPulse:t.pulse+11,kaiSignature:i??void 0,userPhiKey:a??void 0}),ee=await ka([{v:1,pulse:t.pulse,beat:t.beat,stepIndex:t.stepIndex,chakraDay:t.chakraDayKey,stepsPerBeat:t.stepsPerBeat,kaiSignature:i??void 0,userPhiKey:a??void 0,ts:m}]),te=await Aa(ee),re=await Ma({ipfs:ja,packedLedgerBytes:xe(te.payload),prevCid:void 0,pubKeyJwk:v.ownerPubKey,merkleRoot:ee.root,pulse:t.pulse,sign:async e=>{let t=Pa(e),n=Fa(D),r=await crypto.subtle.sign(n,D,t);return new Uint8Array(r)}}),ie={$schema:`https://atlantean.lumitech/schemas/kai-sigil/1.0.json`,contentType:`application/vnd.kai-sigil+json;v=1`,header:{...g,shareUrl:k},payload:S,integrity:w,frequencyHzAtMint:f,valuationSource:u??null,valuationSeal:d??null},ae=y.length,oe=be(y).toString(16).padStart(8,`0`),se=ge(ye(b)),ce=p.creatorId.slice(0,12),le=String(v.zkPoseidonHash).slice(0,12);return{parityUrl:k,payloadHashHex:b,innerRingText:[`u=${k}`,`b58=${se}`,`len=${ae}`,`crc32=${oe}`,`creator=${ce}`,`zk=${le}`,`alg=${p.creatorAlg}`].join(` · `),sigilUrl:k,hashB58:se,embeddedBase:{...ie,ledger:te,dht:re,weekdayResolved:l??null}}}function Ra(e){return JSON.stringify(e)}function za(e,t){let n=e=>{if(typeof window>`u`||typeof window.btoa!=`function`)throw Error(`Base64 encoding unavailable in this environment`);let t=encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(e,t)=>String.fromCharCode(parseInt(t,16)));return window.btoa(t)};return{toDataURL:()=>{let t=e.current;if(!t)throw Error(`SVG not mounted`);return`data:image/svg+xml;base64,${n(new XMLSerializer().serializeToString(t))}`},async exportBlob(n=`image/svg+xml`,r=2){let i=e.current;if(!i)throw Error(`SVG not mounted`);let a=new XMLSerializer().serializeToString(i);if(n===`image/svg+xml`)return new Blob([a],{type:n});let o=URL.createObjectURL(new Blob([a],{type:`image/svg+xml`}));try{let e=new Image,n=Math.round((t??240)*r);e.decoding=`async`,e.src=o,await e.decode();let i=document.createElement(`canvas`);i.width=n,i.height=n;let a=i.getContext(`2d`);if(!a)throw Error(`Canvas 2D context not available`);return a.drawImage(e,0,0,n,n),await new Promise((e,t)=>{i.toBlob(n=>n?e(n):t(Error(`Canvas toBlob failed`)),`image/png`)})}finally{URL.revokeObjectURL(o)}},async verifySvgHash(t){let n=e.current;if(!n)throw Error(`SVG not mounted`);let r=n.cloneNode(!0);r.removeAttribute(`data-svg-hash`),r.removeAttribute(`data-svg-valid`);let i=pe(await me(new XMLSerializer().serializeToString(r)));if(i!==t.toLowerCase())throw Error(`SVG HASH MISMATCH (${i} != ${t})`);return i}}}var Ba=({uid:e,hue:t,visualClamped:n,doAnim:r,quality:i,dpr:a,seed:o,payloadHashHex:s,auraPath:l})=>{let u=`${e}-halo`,d=`${e}-glow`,f=`${e}-bloom`,p=`${e}-mask`,m=`${e}-net`,h=`${e}-warp`;return(0,M.jsxs)(`defs`,{children:[(0,M.jsx)(`path`,{id:`${e}-aura`,d:l}),(0,M.jsxs)(`radialGradient`,{id:u,cx:`50%`,cy:`50%`,r:`50%`,children:[(0,M.jsx)(`stop`,{offset:`0%`,stopColor:c(t,100,50+15*Math.sin(n*2*Math.PI)),stopOpacity:`.55`,children:r&&i!==`low`&&(0,M.jsx)(`animate`,{attributeName:`stop-opacity`,values:`.35;.75;.35`,dur:`var(--dur)`,begin:`var(--off)`,repeatCount:`indefinite`})}),(0,M.jsx)(`stop`,{offset:`100%`,stopColor:`#000`,stopOpacity:`0`})]}),i!==`low`&&a>1&&(0,M.jsxs)(`filter`,{id:d,x:`-30%`,y:`-30%`,width:`160%`,height:`160%`,children:[(0,M.jsx)(`feGaussianBlur`,{stdDeviation:`2.2`,result:`b`}),(0,M.jsxs)(`feMerge`,{children:[(0,M.jsx)(`feMergeNode`,{in:`b`}),(0,M.jsx)(`feMergeNode`,{in:`SourceGraphic`})]})]}),i===`ultra`&&(0,M.jsxs)(`filter`,{id:f,x:`-50%`,y:`-50%`,width:`200%`,height:`200%`,children:[(0,M.jsx)(`feGaussianBlur`,{stdDeviation:`6`,result:`u`}),(0,M.jsx)(`feBlend`,{in:`SourceGraphic`,in2:`u`,mode:`screen`})]}),(0,M.jsx)(`mask`,{id:p,children:(0,M.jsx)(`rect`,{width:`100%`,height:`100%`,fill:`white`})}),(0,M.jsx)(`pattern`,{id:m,patternUnits:`userSpaceOnUse`,width:`160`,height:`160`,patternTransform:`rotate(${o*7%60} 500 500)`,children:(0,M.jsx)(`path`,{d:`M0 80 H160 M80 0 V160 M160 0 L0 160 M0 0 L160 160`,stroke:`#00FFD0`,strokeOpacity:`.06`,strokeWidth:`1`})}),(0,M.jsxs)(`filter`,{id:h,x:`-20%`,y:`-20%`,width:`140%`,height:`140%`,children:[(0,M.jsx)(`feTurbulence`,{type:`fractalNoise`,baseFrequency:`0.006`,numOctaves:`2`,seed:o%997+3,result:`noise`}),(0,M.jsx)(`feDisplacementMap`,{in:`SourceGraphic`,in2:`noise`,scale:.35+(s?parseInt(s.slice(-2),16):0)%12*.05,xChannelSelector:`R`,yChannelSelector:`G`})]})]})},Va=({uid:e,stateKeyOk:t,embeddedMetaJson:n,klockIsoSnapshot:r,apiSnapshot:i,extraEmbed:a,mintSealJson:o,valuationSourceJson:s,displayStepIndex:c,stepsPerBeat:l,eternalSeal:u,ledgerJson:d,dhtJson:f})=>(0,M.jsxs)(M.Fragment,{children:[t&&n&&(0,M.jsx)(`metadata`,{children:S(n)}),r&&(0,M.jsx)(`metadata`,{id:`${e}-klock-json`,children:S(se(r))}),i&&(0,M.jsx)(`metadata`,{id:`${e}-kai-api-json`,children:S(se(i))}),u&&(0,M.jsx)(`metadata`,{id:`${e}-eternal-seal`,children:S(u)}),a&&(0,M.jsx)(`metadata`,{id:`${e}-extra-embed`,children:S(se(a))}),o&&(0,M.jsx)(`metadata`,{id:`${e}-valuation-seal-json`,children:S(o)}),t&&s&&(0,M.jsx)(`metadata`,{id:`${e}-valuation-source-json`,children:S(s)}),(0,M.jsx)(`metadata`,{id:`sigil-display`,children:`{"stepIndex":${c},"stepsPerBeat":${l}}`}),t&&n&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(`metadata`,{id:`${e}-ledger-json`,children:S(d)}),(0,M.jsx)(`metadata`,{id:`${e}-dht-json`,children:S(f)})]})]}),Ha=({uid:e,size:t,baseColor:n,corePath:r,auraId:i,sigPathId:a,doAnim:o,quality:s,dpr:c,pad:l,safeTextWidth:u,outlineWidth:f,strokeCore:p,dotR:h,debugOutline:g,prefersContrast:_,haloId:v,netId:y,warpId:b,glowId:x,maskId:S,rotation:C,chakraSides:w,binaryForRender:T,summary:E,pulse:O})=>(0,M.jsxs)(`g`,{id:`${e}-art`,filter:`url(#${b})`,children:[(0,M.jsx)(`rect`,{width:m,height:m,fill:`url(#${v})`,"aria-hidden":`true`,pointerEvents:`none`}),(0,M.jsx)(`rect`,{x:`0`,y:`0`,width:m,height:m,fill:`url(#${y})`,pointerEvents:`none`}),(0,M.jsx)(`path`,{d:r,fill:`none`,stroke:n,strokeWidth:p,vectorEffect:`non-scaling-stroke`,strokeLinecap:`round`,strokeLinejoin:`round`,mask:`url(#${S})`,filter:s!==`low`&&c>1?`url(#${x})`:void 0,style:{strokeDasharray:g||_?`4 4`:void 0},"aria-hidden":`true`,pointerEvents:`none`}),(g||_)&&(0,M.jsx)(`path`,{d:r,fill:`none`,stroke:`#00FFD0`,strokeWidth:Math.max(1,p*.45),vectorEffect:`non-scaling-stroke`,opacity:.6,"aria-hidden":!0,pointerEvents:`none`}),s!==`low`&&Array.from({length:w},(e,t)=>{let r=t/w*2*Math.PI+C;return(0,M.jsx)(`circle`,{cx:500+380*Math.cos(r),cy:500+380*Math.sin(r),r:h,fill:n,"aria-hidden":`true`,pointerEvents:`none`},t)}),o&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(`use`,{href:`#${i}`,stroke:`#00FFD0`,strokeWidth:Math.max(2,p*1.05),fill:`none`,opacity:`.2`,strokeLinecap:`round`,strokeLinejoin:`round`,vectorEffect:`non-scaling-stroke`,"aria-hidden":`true`,pointerEvents:`none`,children:(0,M.jsx)(`animate`,{attributeName:`stroke-opacity`,values:`.2;.6;.2`,dur:`var(--dur)`,begin:`var(--off)`,repeatCount:`indefinite`})}),(0,M.jsx)(`use`,{href:`#${i}`,stroke:n,strokeWidth:Math.max(1.2,p*.8),fill:`none`,opacity:`.4`,strokeLinecap:`round`,strokeLinejoin:`round`,vectorEffect:`non-scaling-stroke`,"aria-hidden":`true`,pointerEvents:`none`,children:(0,M.jsx)(`animate`,{attributeName:`stroke-opacity`,values:`.4;.9;.4`,dur:`var(--dur)`,begin:`var(--off)`,repeatCount:`indefinite`})})]}),(0,M.jsx)(`circle`,{cx:500,cy:500,r:Math.max(3,h),fill:D,"aria-hidden":`true`,pointerEvents:`none`,children:o&&(0,M.jsx)(`animateTransform`,{attributeName:`transform`,type:`scale`,values:`1;1.5;1`,dur:`var(--dur)`,begin:`var(--off)`,repeatCount:`indefinite`})}),s!==`low`&&a&&T&&(0,M.jsx)(`g`,{id:`signature`,children:(0,M.jsx)(`text`,{fontFamily:`ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial`,fontSize:Math.max(4,t*.028),fill:n,letterSpacing:`1.2`,textAnchor:`middle`,dominantBaseline:`middle`,opacity:`.7`,pointerEvents:`none`,children:(0,M.jsx)(`textPath`,{href:`#${a}`,startOffset:`50%`,children:T})})}),(0,M.jsxs)(`g`,{id:`signature-hint`,"aria-hidden":`true`,pointerEvents:`none`,children:[(0,M.jsx)(`text`,{x:l,y:t-6,fontFamily:d,fontSize:Math.max(4,t*.025),fill:n,opacity:`.12`,textAnchor:`start`,lengthAdjust:`spacingAndGlyphs`,textLength:u,style:{paintOrder:`stroke`,stroke:`#000`,strokeWidth:f,fontVariantNumeric:`tabular-nums`,fontFeatureSettings:`'tnum' 1`},children:E}),(0,M.jsx)(`text`,{x:t-l,y:t-l,fontFamily:d,fontSize:t*.25,fill:n,opacity:`0.04`,textAnchor:`end`,dominantBaseline:`ideographic`,lengthAdjust:`spacingAndGlyphs`,textLength:u,vectorEffect:`non-scaling-stroke`,style:{paintOrder:`stroke`,stroke:`#000`,strokeWidth:f,fontVariantNumeric:`tabular-nums`,fontFeatureSettings:`'tnum' 1`},children:typeof O==`number`?O.toLocaleString?.()??String(O):String(O)})]})]}),Ua=(0,j.forwardRef)((e,t)=>{let{id:n,pulse:r,beat:a,stepIndex:s,stepPct:l,chakraDay:d,size:S=240,hashOverride:D,strict:A=!0,quality:he=`high`,animate:ge=!0,debugOutline:ye=!1,goldenId:be,hashMode:xe=`moment`,userPhiKey:Ce,kaiSignature:Te,intentionSigil:Ae,creatorPublicKey:je,origin:Me,onReady:Ne,onError:N,showZKBadge:Pe=!0,qrHref:Fe,klock:Ie,embed:Le}=e,Re=k(r),ze=k(a),Be=(0,j.useMemo)(()=>h(Re),[Re]),Ve=(0,j.useMemo)(()=>le(Re),[Re]),He=(0,j.useMemo)(()=>{let e=k(s,NaN);return(!Number.isFinite(e)||e<0||e>=y)&&(e=Be),Math.trunc((e%y+y)%y)},[s,Be]),Ue=(0,j.useMemo)(()=>{let e=w(l,NaN);return Number.isFinite(e)||(e=Ve),Math.max(0,Math.min(1-2**-52,e))},[l,Ve]),P=f(d),We=v(d)?d:void 0,F=(0,j.useMemo)(()=>({pulse:Re,beat:ze,stepIndex:He,chakraDayKey:P,stepsPerBeat:y,visualClamped:Ue}),[Re,ze,He,P,Ue]),{prefersReduce:Ge,prefersContrast:Ke}=we(),{kaiData:I,kaiDataRef:qe}=Ee(xe),Je=De(`${F.pulse}|${F.beat}|${F.stepIndex}|${F.chakraDayKey}`),Ye=(0,j.useMemo)(()=>ve(Je),[Je]),{sides:Xe,hue:Ze}=ce[P],Qe=F.pulse%7+1,$e=F.beat%5+2,et=F.visualClamped*2*Math.PI,tt=u**2*Math.PI*(F.pulse%97)%(2*Math.PI),nt=50+15*Math.sin(F.visualClamped*2*Math.PI),rt=c((Ze+360*.03*F.visualClamped)%360,100,nt),L=g[P],R=(0,j.useMemo)(()=>ue(P,He),[P,He]),it=typeof window<`u`?window.devicePixelRatio??1:1,at=ge&&!Ge,z=(be?`${be}-${He}`:void 0)??`ks-${F.pulse}-${F.beat}-${He}`,ot=Math.max(10,Math.floor((S??240)*.08)),st=Math.max(40,(S??240)-ot*2),ct=Math.max(.6,(S??240)*.003),lt=Math.max(1.4,(S??240)*.009),ut=Math.max(2.5,(S??240)*.016),dt=5e3+Math.floor(Ye()*800)+Math.floor(Je%436/2),ft=Math.floor((Je>>>1)%dt),pt=(0,j.useMemo)(()=>p(Xe,tt),[Xe,tt]),B=(0,j.useMemo)(()=>E(Qe,$e,et),[Qe,$e,et]),[mt,ht]=(0,j.useState)(),[gt,_t]=(0,j.useState)();(0,j.useEffect)(()=>{(async()=>{let e=Te;e||(e=pe(await me(`${F.pulse}|${F.beat}|${He}|${P}|${Ae??``}`)),ht(e));let t=Ce;!t&&e&&(t=await _e((await me(`${e}φ`)).slice(0,20)),_t(t))})().catch(N)},[Te,Ce,F.pulse,F.beat,He,P,Ae,N]);let V=Te??mt,vt=Ce??gt,yt=Oe(),bt=(0,j.useRef)(F.pulse),[xt,St]=(0,j.useState)(null),[H,Ct]=(0,j.useState)(null),wt=(0,j.useRef)(null);(0,j.useEffect)(()=>{wt.current={pulse:bt.current,kaiPulse:bt.current,kaiSignature:V??void 0,userPhiKey:vt??void 0,beat:F.beat,stepIndex:F.stepIndex,stepsPerBeat:F.stepsPerBeat,quality:oe(he),frequencyHz:R,chakraDay:F.chakraDayKey,chakraGate:L}},[F.beat,F.stepIndex,V,vt,R,F.chakraDayKey,L,he]);let U=(0,j.useMemo)(()=>`${F.pulse}|${F.beat}|${F.stepIndex}|${F.chakraDayKey}`,[F.pulse,F.beat,F.stepIndex,F.chakraDayKey]),[W,Tt]=(0,j.useState)(null);(0,j.useEffect)(()=>{let e=!1,t=F.pulse,n=F.beat,r=F.stepIndex,a=F.chakraDayKey,s=F.stepsPerBeat,c=R,l=U,f=v(d)?d:null;return(async()=>{try{let d=await Se({creatorPublicKey:je,userPhiKey:vt,kaiSignature:V,origin:Me,pulse:t,beat:n,chakraDay:a,stepIndex:r}),p=qe.current,m=ne(C(p,`kaiMomentSummary`))??ne(C(p,`kairos_seal`))??ne(C(p,`kairos_seal_day_month_percent`))??`Kairos HarmoniK Sigil • ${a} • Beat ${n} • Step ${r}`,h={pulse:bt.current,kaiPulse:bt.current,kaiSignature:V??void 0,userPhiKey:vt??void 0,beat:n,stepsPerBeat:s,quality:he===`low`?`low`:`high`,frequencyHz:c,chakraDay:a,chakraGate:L};try{let{seal:e}=await fe(h,bt.current,yt);Ct(e)}catch(e){N?.(e)}let g=await La({canon:{pulse:t,beat:n,stepIndex:r,chakraDayKey:a,stepsPerBeat:s},hashMode:xe,chakraGate:L,kaiSignature:V,userPhiKey:vt,intentionSigil:Ae,origin:Me,title:m,klockSnapshot:_(Ie)?JSON.parse(se(Ie)):null,kaiApiSnapshot:_(I)?JSON.parse(se(I)):null,weekdayResolved:f,valuationSource:h,mintSeal:null,frequencyHzCurrent:c,qrHref:Fe,canonicalUrlFromContext:o,creatorResolved:d}),v={},y=``,b=``,x=``,S=``,w=``;if(T(g)){let e=g.embeddedBase;T(e)&&(v=e);let t=g.payloadHashHex;typeof t==`string`&&(y=t);let n=g.parityUrl;typeof n==`string`&&(b=n);let r=g.innerRingText;typeof r==`string`&&(x=r);let i=g.sigilUrl;typeof i==`string`&&(S=i);let a=g.hashB58;typeof a==`string`&&(w=a)}let E={PULSE_MS:i,STEPS_BEAT:s,PHI:u,algorithm:`computeIntrinsicUnsigned`,version:`1`},D=h?de(h,t).unsigned.valuePhi:null,O=Ra({...v,valuation:H??null,valuationSource:h,valuationRuntime:E,valuationLiveAtExport:D}),k={createdFor:{pulse:t,beat:n,stepIndex:r,chakraDayKey:a,stateKey:l},payloadHashHex:y,shareUrl:b,embeddedMetaJson:O,valuationSourceJson:JSON.stringify(h),zkScheme:`groth16-poseidon`,zkPoseidonHash:`7110303097080024260800444665787206606103183587082596139871399733998958991511`,innerRingText:x,sigilUrl:S,hashB58:w,frequencyHz:c};!e&&k.createdFor.stateKey===l&&(Tt(k),Ne?.({hash:k.payloadHashHex,url:k.shareUrl,metadataJson:k.embeddedMetaJson}))}catch(e){if(N?.(e),A)throw e instanceof Error?e:Error(String(e))}})().catch(e=>{if(N?.(e),A)throw e instanceof Error?e:Error(String(e))}),()=>{e=!0}},[U,F.pulse,F.beat,F.stepIndex,F.chakraDayKey,F.stepsPerBeat,R,V,vt,xe,je,Me,Fe,A,Ne,N,P,he,Ie,I,qe,yt,L,d]);let Et=(0,j.useMemo)(()=>{let e=W;return e&&e.createdFor.stateKey===U?e.createdFor.stepIndex:F.stepIndex},[W,U,F.stepIndex]),Dt=(0,j.useMemo)(()=>{let e=W;return e&&e.createdFor.stateKey===U?e.frequencyHz:R},[W,U,R]);(0,j.useEffect)(()=>{try{if(!wt.current||!Number.isFinite(F.pulse)){St(null);return}let{unsigned:e}=de(wt.current,F.pulse);St(e.valuePhi)}catch(e){N?.(e),St(null)}},[F.pulse,N]);let Ot=C(Ie,`eternalSeal`)??C(Ie,`seal`)??C(I,`kairos_seal`),kt=(0,j.useMemo)(()=>ie(Ot,F.beat,Et,F.pulse),[Ot,F.beat,Et,F.pulse]),At=(0,j.useMemo)(()=>{let e=W&&W.createdFor.stateKey===U?W.createdFor.stepIndex:Et;return ie(Ot,F.beat,e,F.pulse)},[W,U,Ot,F.beat,Et,F.pulse]),jt=(0,j.useMemo)(()=>x(At),[At]),{klockIsoSnapshot:Mt,apiSnapshot:G,klockDataAttrs:Nt,eternalMonth:Pt,harmonicDay:Ft,kaiPulseEternal:It,solarChakraStepString:Lt,chakraArc:Rt}=(0,j.useMemo)(()=>ee(Ie,I),[Ie,I]),zt=(0,j.useRef)(null);(0,j.useLayoutEffect)(()=>{let e=zt.current;if(!e||!D)return;let t=!1;return(async()=>{try{let n=e.cloneNode(!0);n.removeAttribute(`data-svg-hash`),n.removeAttribute(`data-svg-valid`);let r=pe(await me(new XMLSerializer().serializeToString(n)));if(t)return;if(e.dataset.svgHash=r,e.dataset.svgValid=String(r===D.toLowerCase()),r!==D.toLowerCase()&&A)throw Error(`[KaiSigil] SVG HASH MISMATCH (${r})`)}catch(e){if(N?.(e),A)throw e instanceof Error?e:Error(String(e))}})().catch(e=>{if(N?.(e),A)throw e instanceof Error?e:Error(String(e))}),()=>{t=!0}},[D,A,U,N]),(0,j.useLayoutEffect)(()=>{if(!A)return;let e=zt.current;if(!e)return;let t=W;if(!t||t.createdFor.stateKey!==U)return;let n=e.getAttribute(`data-step-index`),r=e.getAttribute(`data-frequency-hz`),i=e.getAttribute(`data-summary-b64`)??``,a=n!=null&&n!==``?Number(n):NaN,o=r!=null&&r!==``?Number(r):NaN,s=e.getAttribute(`data-share-url`)||void 0,c=e.getAttribute(`data-payload-hash`)||void 0,l=``;try{l=ae(i)}catch{l=``}let u=At,d=e=>e.replace(/â¢|·|\u2022/g,`•`),f=[];if(d(l)!==d(u)&&f.push(`summary mismatch (“${l}” != “${u}”)`),Number.isFinite(a)?a!==t.createdFor.stepIndex&&f.push(`data-step-index(${a}) != built(${t.createdFor.stepIndex})`):f.push(`missing/invalid data-step-index`),!Number.isFinite(o))f.push(`missing/invalid data-frequency-hz`);else{let e=ue(P,a);(Math.abs(o-t.frequencyHz)>1e-6||Math.abs(e-o)>1e-6)&&f.push(`frequency/step mismatch (${o} vs step ${a})`)}if(s!==t.shareUrl&&f.push(`data-share-url != built.shareUrl`),c&&c!==t.payloadHashHex&&f.push(`data-payload-hash != built.payloadHashHex`),f.length)throw Error(`[KaiSigil] Invariant violation → ${f.join(`; `)}`)},[A,W,U,P,F.beat,F.pulse,Dt,At]);let{toDataURL:Bt,exportBlob:Vt,verifySvgHash:Ht}=za(zt,S),K=(0,j.useMemo)(()=>_(Le)?JSON.parse(se(Le)):null,[Le]),Ut=W?.createdFor.stateKey===U?W?.payloadHashHex:void 0,q=W?.createdFor.stateKey===U?W?.zkScheme:void 0,Wt=W?.createdFor.stateKey===U?W?.zkPoseidonHash:void 0,Gt=W?.createdFor.stateKey===U?W?.shareUrl:void 0,Kt=(W?.createdFor.stateKey===U?W?.frequencyHz:void 0)??R,qt=(0,j.useMemo)(()=>{if(!V)return``;let e=re(V),t=2*Math.PI*((S??240)*.46),n=Math.max(3.5,(S??240)*.028*.55),r=Math.max(24,Math.floor(t/n));return e.length>r?e.slice(0,r):e},[V,S]),Jt=b(Ze,F.visualClamped,W?.payloadHashHex),Yt=V?`${z}-sig-path`:void 0,Xt=`${z}-desc`,Zt=W?.createdFor.stateKey===U?W?.shareUrl:void 0,Qt=({children:e})=>Zt?(0,M.jsx)(`a`,{href:Zt,target:`_self`,"aria-label":`Open canonical sigil ${W?.payloadHashHex??``}`,children:e}):(0,M.jsx)(`g`,{tabIndex:0,role:`button`,"aria-label":`Sigil not yet canonicalized`,children:e}),$t=W?.createdFor.stateKey===U,en=te(Ut,$t,P,Kt,F.pulse,F.beat,Wt),{ledgerJson:tn,dhtJson:nn}=(0,j.useMemo)(()=>O($t?W?.embeddedMetaJson:void 0),[W,$t]);return(0,j.useImperativeHandle)(t,()=>({toDataURL:Bt,exportBlob:Vt,verifySvgHash:Ht,verifyConsistency:()=>{let e=W;if(!e)throw Error(`No built snapshot yet`);if(e.createdFor.stateKey!==U)throw Error(`Built snapshot does not match current stateKey`)},uid:z,stepIndex:He,payloadHashHex:W?.payloadHashHex,sigilUrl:W?.sigilUrl,userPhiKey:vt,kaiSignature:V})),(0,M.jsxs)(`svg`,{ref:zt,id:n??z,role:`img`,"aria-describedby":Xt,lang:`en`,"aria-label":`Kairos sigil — pulse ${F.pulse}`,viewBox:`0 0 ${m} ${m}`,width:S,height:S,shapeRendering:`geometricPrecision`,style:{background:`transparent`,"--dur":`${dt}ms`,"--off":`${ft}ms`,"--pulse":`${i}ms`,cursor:Gt?`pointer`:`default`},"data-pulse":String(F.pulse),"data-beat":String(F.beat),"data-step-index":String(Et),"data-frequency-hz":String(Dt),"data-chakra-day":P,"data-weekday":We??void 0,"data-chakra-gate":L,"data-quality":he,"data-golden-id":be??void 0,"data-kai-signature":V??void 0,"data-phi-key":vt??void 0,"data-payload-hash":Ut??void 0,"data-zk-scheme":q??void 0,"data-zk-poseidon-hash":Wt??void 0,"data-share-url":Gt||void 0,"data-eternal-seal":Ot??void 0,"data-eternal-month":Pt??void 0,"data-harmonic-day":Ft??void 0,"data-kai-pulse-eternal":typeof It==`number`?String(It):void 0,"data-solar-chakra-step":Lt??void 0,"data-arc":Rt??void 0,"data-summary-b64":jt,...Nt,"data-valuation-algorithm":H?.algorithm??void 0,"data-valuation-policy":H?.policyId??void 0,"data-valuation-policy-checksum":H?.policyChecksum??void 0,"data-valuation-stamp":H?.stamp??void 0,"data-valuation-value-phi":H?.valuePhi==null?void 0:String(H.valuePhi),"data-valuation-computed-at":H?.computedAtPulse==null?void 0:String(H.computedAtPulse),"data-value-phi-live":xt==null?void 0:String(xt),children:[(0,M.jsx)(`title`,{children:`Kairos HarmoniK Sigil • Pulse ${F.pulse}`}),(0,M.jsxs)(`desc`,{id:Xt,children:[`↳ `,kt]}),(0,M.jsx)(Va,{uid:z,stateKeyOk:$t,embeddedMetaJson:$t?W?.embeddedMetaJson:void 0,klockIsoSnapshot:Mt,apiSnapshot:G,extraEmbed:K,mintSealJson:H?JSON.stringify(H):null,valuationSourceJson:$t?W?.valuationSourceJson:void 0,displayStepIndex:Et,stepsPerBeat:F.stepsPerBeat,eternalSeal:Ot??void 0,ledgerJson:tn,dhtJson:nn}),(0,M.jsx)(Ba,{uid:z,hue:Ze,visualClamped:F.visualClamped,doAnim:at,quality:he,dpr:it,seed:Je,payloadHashHex:W?.payloadHashHex,auraPath:B}),V&&(0,M.jsx)(`defs`,{children:(0,M.jsx)(`path`,{id:Yt,d:`M 500 ${500-1e3*.46}
                a ${1e3*.46} ${1e3*.46} 0 1 1 0 ${1e3*.92}
                a ${1e3*.46} ${1e3*.46} 0 1 1 0 -${1e3*.92}`,fill:`none`})}),(0,M.jsx)(Qt,{children:(0,M.jsxs)(`g`,{id:`${z}-tilt`,style:{transformOrigin:`500px 500px`},children:[at&&(0,M.jsx)(`animateTransform`,{attributeName:`transform`,type:`rotate`,values:`-2 500 500;2 500 500;-2 500 500`,dur:`var(--dur)`,begin:`var(--off)`,repeatCount:`indefinite`}),(0,M.jsx)(Ha,{uid:z,size:S,baseColor:rt,corePath:pt,auraId:`${z}-aura`,sigPathId:Yt,doAnim:at,quality:he,dpr:it,pad:ot,safeTextWidth:st,outlineWidth:Ke?ct*1.2:ct,strokeCore:lt,dotR:ut,debugOutline:ye,prefersContrast:Ke,haloId:`${z}-halo`,netId:`${z}-net`,warpId:`${z}-warp`,glowId:`${z}-glow`,maskId:`${z}-mask`,rotation:tt,chakraSides:ce[P].sides,binaryForRender:qt,summary:kt,pulse:F.pulse})]})}),Pe&&(0,M.jsx)(ke,{uid:z,size:S,phaseColor:Jt,outerRingText:en,innerRingText:W&&W.createdFor.stateKey===U?W.innerRingText:`initializing…`,animate:ge,prefersReduce:Ge})]})});Ua.displayName=`KaiSigil`;var Wa=Ua;export{Wa as t};